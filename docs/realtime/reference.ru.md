# Ссылка на RealtimeGTFS

Информация GTFS Realtime позволяет транзитным агентствам предоставлять потребителям в Realtime информацию о сбоях в обслуживании (станции закрыты, линии не работают, важные задержки и т.д.), местонахождении их транспортных средств и ожидаемом времени прибытия.

Версия 2.0 спецификации корма обсуждается и документируется на этом сайте. Допустимые версии - "2.0", "1.0".

### Определения терминов

#### Требуется

В GTFS v2.0 и выше колонка _Required_ описывает, какие поля должны быть предоставлены производителем для того, чтобы транзитные данные были действительными и имели смысл для потребляющего приложения.

В поле _Required_ используются следующие значения:

*   **Required**: Это поле должно быть предоставлено производителем фида GTFS.
*   **Условно обязательное**: Это поле требуется при определенных условиях, которые указаны в _описании_ поля. Вне этих условий поле является необязательным.
*   **Необязательно**: Это поле является необязательным и не требуется для реализации производителями. Однако, если данные доступны в базовых системах автоматического определения местоположения транспортного средства (например, `временная метка` VehiclePosition), рекомендуется, чтобы производители предоставляли эти необязательные поля, когда это возможно.

_Обратите внимание, что семантические требования не были определены в GTFS версии 1.0, и поэтому фиды с `gtfs_realtime_version` равным `1` могут не соответствовать этим требованиям (подробнее см. [предложение по семантическим требованиям](https://github.com/google/transit/pull/64)_).

#### Кардинальность

_Кардинальность_ представляет собой количество элементов, которые могут быть предоставлены для определенного поля, со следующими значениями:

*   **One** - Для этого поля может быть предоставлен один элемент one. Это соответствует [_обязательной_ и _необязательной_](https://developers.google.com/protocol-buffers/docs/proto#simple) кардинальности Protocol Buffer.
*   **Много** - Для этого поля может быть предоставлено много элементов (0, 1 или более). Это соответствует [_повторяющейся_](https://developers.google.com/protocol-buffers/docs/proto#simple) кардинальности Protocol Buffer.

Всегда обращайтесь к полям _Required_ и _Description_, чтобы узнать, является ли поле обязательным, условно обязательным или необязательным. Для определения кардинальности Protocol Buffer обратитесь к файлу [GTFS-Realtime/proto/GTFS-Realtime.proto">`GTFS`](<https://github.com/google/transit/blob/master/\<glossary variable=>).proto.

#### Типы данных буфера протокола

Следующие типы данных буфера протокола используются для описания элементов подачи:

*   **сообщение**: Сложный тип
*   **перечисление**: Список фиксированных значений

#### Экспериментальные поля

Поля, помеченные как **экспериментальные**, могут быть изменены и еще не приняты официально в спецификацию. **Экспериментальное** поле может быть официально принято в будущем.

## Индекс элемента

*   [FeedMessage](#message-feedmessage)
    *   [FeedHeader](#message-feedheader)

        *   [Инкрементальность](#enum-incrementality)

    *   [FeedEntity](#message-feedentity)

        *   [TripUpdate](#message-tripupdate)

            *   [TripDescriptor](#message-tripdescriptor)

                *   [ScheduleRelationship](#enum-schedulerelationship-1)

            *   [VehicleDescriptor](#message-vehicledescriptor)

            *   [StopTimeUpdate](#message-stoptimeupdate)

                *   [StopTimeEvent](#message-stoptimeevent)
                *   [ScheduleRelationship](#enum-schedulerelationship)
                *   [StopTimeProperties](#message-stoptimeproperties)

            *   [TripProperties](#message-tripproperties)

        *   [VehiclePosition](#message-vehicleposition)

            *   [TripDescriptor](#message-tripdescriptor)

                *   [Взаимосвязь расписания](#enum-schedulerelationship-1)

            *   [VehicleDescriptor](#message-vehicledescriptor)

            *   [Позиция](#message-position)

            *   [Состояние остановки транспортного средства](#enum-vehiclestopstatus)

            *   [Уровень загруженности](#enum-congestionlevel)

            *   [Статус занятости](#enum-occupancystatus)

            *   [CarriageDetails](#message-carriagedetails)

        *   [Оповещение](#message-alert)

            *   [Диапазон времени](#message-timerange)

            *   [EntitySelector](#message-entityselector)

                *   [TripDescriptor](#message-tripdescriptor)

                    *   [РасписаниеВзаимосвязь](#enum-schedulerelationship-1)

            *   [Причина](#enum-cause)

            *   [Эффект](#enum-effect)

            *   [TranslatedString](#message-translatedstring)

                *   [Перевод](#message-translation)

            *   [Уровень серьезности](#enum-severitylevel)

## Элементы

## _сообщение_ FeedMessage

Содержимое сообщения фида. Каждое сообщение в потоке получается как ответ на соответствующий запрос HTTP GET. Фид Realtime всегда определяется по отношению к существующему фиду GTFS. Все идентификаторы сущностей определяются по отношению к фиду GTFS.

**Поля**

| _**Имя поля**_ | _**Тип**_                         | _**Требуется**_   | _**Кардинальность**_ | _**Описание**_                                                                                                                                                                                                                          |
| -------------- | --------------------------------- | ----------------- | -------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **заголовок**  | [FeedHeader](#message-feedheader) | Требуется         | Один                 | Метаданные о данном фиде и сообщении фида.                                                                                                                                                                                              |
| **сущность**   | [FeedEntity](#message-feedentity) | Требуется условие | Многие               | Содержание фида.  Если для транзитной системы доступна информация в реальном времени, это поле должно быть предоставлено.  Если это поле пустое, потребители должны считать, что информация в реальном времени для системы отсутствует. |

## _сообщение_ FeedHeader

Метаданные о фиде, включаемые в сообщения фида.

**Поля**

| _**Имя поля**_            | _**Тип**_                                                                  | _**Требуется**_ | _**Кардинальность**_ | _**Описание**_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| ------------------------- | -------------------------------------------------------------------------- | --------------- | -------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **gtfs_realtime_version** | [строка](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Требуется       | Один                 | Версия спецификации фида. Текущая версия - 2.0.                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **инкрементальность**     | [Инкрементальность](#enum-incrementality)                                  | Требуется       | Один                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **временная метка**       | [уинт64](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Требуется       | Один                 | Эта временная метка определяет момент создания содержимого данного фида (по серверному времени). В POSIX-времени (т.е. количество секунд с 1 января 1970 года 00:00:00 UTC). Чтобы избежать перекоса во времени между системами, производящими и потребляющими информацию Realtime, настоятельно рекомендуется получать временную метку от сервера времени. Вполне допустимо использовать серверы Stratum 3 или даже более низкого уровня, поскольку разница во времени до пары секунд вполне допустима. |

## _enum_ Incrementality

Определяет, является ли текущая выборка инкрементной.

*   **FULL_DATASET**: это обновление фида перезапишет всю предшествующую информацию Realtime для данного фида. Таким образом, ожидается, что это обновление предоставит полный снимок всей известной информации Realtime.
*   **DIFFERENTIAL**: в настоящее время этот режим **не поддерживается**, и поведение фидов, использующих этот режим, **не определено**. В [GTFS-realtime">списке рассылкиGTFS Realtime](<https://groups.google.com/group/\<glossary variable=>) ведутся обсуждения по поводу полного определения поведения режима DIFFERENTIAL, и документация будет обновлена, когда эти обсуждения будут завершены.

**Значения**

| _**Значение**_   |
| ---------------- |
| **FULL_DATASET** |
| **ДИФФЕРЕНЦИАЛ** |

## _сообщение_ FeedEntity

Определение (или обновление) сущности в транзитной ленте. Если сущность не удаляется, должно быть заполнено ровно одно из полей 'trip_update', 'vehicle', 'alert' и 'shape'.

**Поля**

| _**Имя поля**_            | _**Тип**_                                                                  | _**Требуется**_   | _**Кардинальность**_ | _**Описание**_                                                                                                                                                                                                                                                                                                                |
| ------------------------- | -------------------------------------------------------------------------- | ----------------- | -------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **id**                    | [строка](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Требуется         | Один                 | Идентификатор, уникальный для данной сущности. Идентификаторы используются только для обеспечения поддержки инкрементальности. Фактические сущности, на которые ссылается фид, должны быть указаны явными селекторами (см. EntitySelector ниже для получения дополнительной информации).                                      |
| **удалён**                | [bool](https://developers.google.com/protocol-buffers/docs/proto#scalar)   | Опционально       | Один                 | Должна ли эта сущность быть удалена. Должно быть предоставлено только для фидов с инкрементальностью DIFFERENTIAL - это поле НЕ должно быть предоставлено для фидов с инкрементальностью FULL_DATASET.                                                                                                                        |
| **trip_update**           | [TripUpdate](#message-tripupdate)                                          | Требуется условие | Один                 | Данные о задержках отправления поездки в Realtime.  Должно быть предоставлено хотя бы одно из полей trip_update, vehicle, alert или shape - все эти поля не могут быть пустыми.                                                                                                                                               |
| **транспортное средство** | [VehiclePosition](#message-vehicleposition)                                | Требуется условие | Один                 | Данные о положении транспортного средства в Realtime. Должно быть указано хотя бы одно из полей trip_update, vehicle, alert или shape - все эти поля не могут быть пустыми.                                                                                                                                                   |
| **оповещение**            | [Оповещение](#message-alert)                                               | Требуется условие | Один                 | Данные о предупреждении в Realtime. Должно быть указано хотя бы одно из полей trip_update, vehicle, alert или shape - все эти поля не могут быть пустыми.                                                                                                                                                                     |
| **форма**                 | [Форма](#message-shape)                                                    | Требуется условие | Один                 | Данные о форме, добавленной в режиме Realtime, например, для объезда. Должно быть указано хотя бы одно из полей trip_update, vehicle, alert или shape - все эти поля не могут быть пустыми. <br/><br/>**Осторожно:** это поле все еще **экспериментальный**, и подлежит изменению. Он может быть официально принят в будущем. |

## _сообщение_ TripUpdate

ОбновлениеRealtime о прогрессе транспортного средства во время поездки. Обратитесь также к общему обсуждению [Realtime/trip-updates">сущностей обновления поездок](</\<glossary variable=>).

В зависимости от значения ScheduleRelationship, сообщение TripUpdate может указывать:

*   Поездку, которая следует по Schedule.
*   Поездку, которая следует по маршруту, но не имеет фиксированного Schedule.
*   Поездку, которая была добавлена или удалена в отношении Schedule.
*   Новая поездка, которая является копией существующей поездки в статической GTFS. Она будет выполняться в дату и время обслуживания, указанные в TripProperties.

Обновления могут быть для будущих, прогнозируемых событий прибытия/отправления, или для прошлых событий, которые уже произошли. В большинстве случаев информация о прошлых событиях является измеренной величиной, поэтому рекомендуется, чтобы значение неопределенности было равно 0. Хотя могут быть случаи, когда это не так, поэтому допускается, чтобы значение неопределенности для прошлых событий было отличным от 0. Если неопределенность обновления не равна 0, то либо обновление является приблизительным прогнозом для незавершенного путешествия, либо измерение не является точным, либо обновление было прогнозом в прошлом, который не был проверен после того, как событие произошло.

Если транспортное средство обслуживает несколько поездок в пределах одного блока (более подробную информацию о поездках и блоках см. в файле [Schedule/reference/#tripstxt">GTFS trips.txt](</\<glossary variable=>)):

*   фид должен включать TripUpdate для поездки, которая в данный момент обслуживается транспортным средством. Производителям рекомендуется включать TripUpdate для одной или нескольких поездок после текущей поездки в блоке данного транспортного средства, если производитель уверен в качестве прогнозов для этих будущих поездок. Включение нескольких TripUpdates для одного и того же транспортного средства позволяет избежать "всплытия" прогнозов для пассажиров при переходе от одной поездки к другой, а также заранее предупредить пассажиров о задержках, которые влияют на последующие поездки (например, когда известная задержка превышает запланированное время ожидания между поездками).
*   соответствующие сущности TripUpdate не обязаны добавляться в фид в том же порядке, в котором они запланированы в блоке. Например, если есть поездки с `trip_ids` 1, 2 и 3, которые все принадлежат одному блоку, и транспортное средство совершает поездку 1, затем поездку 2, а затем поездку 3, сущности `trip_update` могут появляться в любом порядке - например, допускается добавление поездки 2, затем поездки 1, а затем поездки 3.

Обратите внимание, что обновление может описывать поездку, которая уже завершилась. Для этого достаточно предоставить обновление для последней остановки поездки. Если время прибытия на последнюю остановку находится в прошлом, клиент сделает вывод, что вся поездка находится в прошлом (возможно, хотя и несущественно, также предоставить обновления для предшествующих остановок). Этот вариант наиболее актуален для поездки, которая завершилась раньше Schedule, но, согласно Schedule, поездка все еще продолжается в текущий момент времени. Удаление обновлений для этой поездки может заставить клиента предположить, что поездка все еще продолжается. Обратите внимание, что поставщик фида может, но не обязан, удалять прошлые обновления - это один из случаев, когда это было бы практически полезно.

**Поля**

| _**Имя поля**_            | _**Тип**_                                                                  | _**Требуется**_   | _**Кардинальность**_ | _**Описание**_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| ------------------------- | -------------------------------------------------------------------------- | ----------------- | -------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **поездка**               | [TripDescriptor](#message-tripdescriptor)                                  | Требуется         | Один                 | Поездка, к которой относится это сообщение. Для каждого фактического экземпляра поездки может существовать не более одного объекта TripUpdate. Если нет ни одной, это означает, что информация о прогнозировании недоступна. Это означает, что _не_ означает, что поездка проходит в соответствии с Schedule.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **транспортное средство** | [VehicleDescriptor](#message-vehicledescriptor)                            | Опционально       | Один                 | Дополнительная информация о транспортном средстве, обслуживающем данную поездку.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **stop_time_update**      | [StopTimeUpdate](#message-stoptimeupdate)                                  | Требуется условие | Многие               | Обновления времени остановок для данной поездки (как будущих, т.е. прогнозируемых, так и в некоторых случаях прошлых, т.е. тех, которые уже произошли). Обновления должны быть отсортированы по stop_sequence и применяться для всех последующих остановок поездки вплоть до следующей указанной stop_time_update.  Для поездки должно быть предоставлено хотя бы одно обновление стоп_времени, если только отношение trip.schedule_relationship не является CANCELED или DUPLICATED - если поездка отменена, никаких обновлений стоп_времени предоставлять не нужно. Если поездка дублируется, могут быть предоставлены обновления стоп_времени, чтобы указать информацию в реальном времени для новой поездки.                                                                                                                                                                                                                                                                                                                  |
| **временная метка**       | [уинт64](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Опционально       | Один                 | Самый последний момент, в который был измерен ход транспортного средства в реальном времени для оценки времени остановки в будущем. Когда предоставляются данные о времени остановки в прошлом, время прибытия/убытия может быть более ранним, чем это значение. В POSIX-времени (т.е. количество секунд с 1 января 1970 года 00:00:00 UTC).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **задержка**              | [int32](https://developers.google.com/protocol-buffers/docs/proto#scalar)  | Опционально       | Один                 | Текущее отклонение Schedule для данной поездки. Задержка должна указываться только в том случае, если прогноз дается относительно некоторого существующего Schedule в GTFS.<br/>Задержка (в секундах) может быть положительной (означает, что транспортное средство опаздывает) или отрицательной (означает, что транспортное средство опережает Schedule). Задержка, равная 0, означает, что транспортное средство прибыло точно по расписанию.<br/>Информация о задержке в StopTimeUpdates имеет приоритет над информацией о задержке на уровне поездки, так что задержка на уровне поездки распространяется только до следующей остановки в пути с указанным значением задержки в StopTimeUpdate.<br/>Провайдерам настоятельно рекомендуется предоставлять значение TripUpdate.timestamp, указывающее, когда значение задержки было обновлено в последний раз, чтобы оценить свежесть данных.<br/><br/>**Осторожно:** это поле все еще **экспериментальный**, и подлежит изменению. Он может быть официально принят в будущем. |
| **свойства_путешествия**  | [TripProperties](#message-tripproperties)                                  | Опционально       | Один                 | Предоставляет обновленные свойства для поездки. <br/><br/>**Осторожно:** сообщение **экспериментальный**, и подлежит изменению. Он может быть официально принят в будущем.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |

## _сообщение_ StopTimeEvent

Информация о времени для одного прогнозируемого события (прибытие или отправление). Временная информация состоит из задержки и/или расчетного времени, а также неопределенности.

*   Задержка должна использоваться, когда предсказание дается относительно некоторого существующего Schedule в GTFS.
*   Время должно быть указано независимо от того, существует ли предсказанное Schedule или нет. Если указаны и время, и задержка, то приоритет отдается времени (хотя обычно время, если оно указано для запланированной поездки, должно быть равно запланированному времени в GTFS + задержка).

Неопределенность в равной степени относится как к времени, так и к задержке. Неопределенность приблизительно определяет ожидаемую ошибку в истинной задержке (но обратите внимание, мы еще не определили ее точное статистическое значение). Возможно, что неопределенность равна 0, например, для поездов, которые движутся под компьютерным контролем времени.

**Поля**

| _**Имя поля**_       | _**Тип**_                                                                 | _**Требуется**_   | _**Кардинальность**_ | _**Описание**_                                                                                                                                                                                                                                                                                                                                                            |
| -------------------- | ------------------------------------------------------------------------- | ----------------- | -------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **задержка**         | [int32](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Требуется условие | Один                 | Задержка (в секундах) может быть положительной (означает, что транспортное средство опаздывает) или отрицательной (означает, что транспортное средство опережает Schedule). Задержка, равная 0, означает, что транспортное средство прибыло точно по расписанию.  В событии StopTimeEvent должна быть указана либо задержка, либо время - оба поля не могут быть пустыми. |
| **время**            | [инт64](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Требуется условие | Один                 | Событие как абсолютное время. В POSIX-времени (т.е. количество секунд с 1 января 1970 года 00:00:00 UTC). В событии StopTimeEvent должна быть указана либо задержка, либо время - оба поля не могут быть пустыми.                                                                                                                                                         |
| **неопределенность** | [int32](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Опционально       | Один                 | Если неопределенность опущена, она интерпретируется как неизвестная. Чтобы указать полностью определенное предсказание, задайте его неопределенность равной 0.                                                                                                                                                                                                            |

## _сообщение_ StopTimeUpdate

ОбновлениеRealtime событий прибытия и/или отправления для данной остановки в поездке. См. также общее обсуждение обновления времени остановки в документации по [Realtime/trip-updates">сущностям](</\<glossary variable=>) [TripDescriptor](#message-tripdescriptor) и [Realtime/trip-updates">Trip Updates](</\<glossary variable=>).

Обновления могут быть предоставлены как для прошлых, так и для будущих событий. Производителю разрешается, хотя и не требуется, отбрасывать прошлые события.

Обновление связано с конкретной остановкой либо через stop_sequence, либо через stop_id, поэтому одно из этих полей обязательно должно быть установлено. Если один и тот же stop_id посещается более одного раза за поездку, то stop_sequence должен быть указан во всех StopTimeUpdates для этого stop_id в этой поездке.

**Поля**

| _**Имя поля**_                   | _**Тип**_                                                                  | _**Требуется**_   | _**Кардинальность**_ | _**Описание**_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| -------------------------------- | -------------------------------------------------------------------------- | ----------------- | -------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **stop_sequence**                | [uint32](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Требуется условие | Один                 | Должно быть таким же, как в файле stop_times.txt в соответствующем канале GTFS.  В StopTimeUpdate должны быть указаны либо stop_sequence, либо stop_id - оба поля не могут быть пустыми. stop_sequence требуется для поездок, которые посещают один и тот же stop_id более одного раза (например, цикл), чтобы однозначно определить, для какой остановки делается прогноз. Если `StopTimeProperties.assigned_stop_id` заполнен, то `stop_sequence` должен быть заполнен.                                                                |
| **stop_id**                      | [строка](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Требуется условие | Один                 | Должно быть таким же, как в файле stops.txt в соответствующем файле GTFS. В StopTimeUpdate должны быть указаны либо stop_sequence, либо stop_id - оба поля не могут быть пустыми. Если `StopTimeProperties.assigned_stop_id` заполнено, предпочтительно опустить `stop_id` и использовать только `stop_sequence`. Если `StopTimeProperties.assigned_stop_id` и `stop_id` заполнены, `stop_id` должны совпадать `assigned_stop_id`.                                                                                                       |
| **прибытие**                     | [StopTimeEvent](#message-stoptimeevent)                                    | Требуется условие | Один                 | Если schedule_relationship пустое или SCHEDULED, то либо прибытие, либо отправление должно быть предоставлено в StopTimeUpdate - оба поля не могут быть пустыми. arrival и departure могут быть пустыми, если schedule_relationship SKIPPED.  Если schedule_relationship - NO_DATA, прибытие и отправление должны быть пустыми.                                                                                                                                                                                                          |
| **отправление**                  | [StopTimeEvent](#message-stoptimeevent)                                    | Требуется условие | Один                 | Если schedule_relationship пустое или SCHEDULED, то либо прибытие, либо отправление должно быть предоставлено в StopTimeUpdate - оба поля не могут быть пустыми. arrival и departure могут быть пустыми, если schedule_relationship SKIPPED.  Если schedule_relationship - NO_DATA, прибытие и отправление должны быть пустыми.                                                                                                                                                                                                          |
| **отправление_занятость_статус** | [Статус занятости](#enum-occupancystatus)                                  | Опционально       | Один                 | Прогнозируемое состояние заполненности пассажирами транспортного средства сразу после отправления с данной остановки. Если предоставляется, должна быть предоставлена stop_sequence. Для того, чтобы предоставить departure_occupancy_status без предоставления прогнозов прибытия или отправления в реальном времени, заполните это поле и установите StopTimeUpdate.schedule_relationship = NO_DATA. <br/><br/>**Осторожно:** это поле все еще **экспериментальный**, и подлежит изменению. Он может быть официально принят в будущем. |
| **связь_расписания**             | [ScheduleRelationship](#enum-schedulerelationship)                         | Опционально       | Один                 | По умолчанию используется отношение SCHEDULED.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| **свойства_времени_остановки**   | [StopTimeProperties](#message-stoptimeproperties)                          | Опционально       | Один                 | ОбновленияRealtime для определенных свойств, определенных в файле GTFS stop_times.txt <br/><br/>**Осторожно:** это поле все еще **экспериментальный**, и подлежит изменению. Он может быть официально принят в будущем.                                                                                                                                                                                                                                                                                                                  |

## _enum_ ScheduleRelationship

Связь между этим StopTime и статическим Schedule.

**Значения**

| _**Значение**_  | _**Комментарий**_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| --------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **ЗАПИСАНО**    | Транспортное средство движется в соответствии со своим статическим Schedule остановок, хотя и не обязательно в соответствии со временем, указанным в Schedule. Это **по умолчанию** поведение. Должно быть указано хотя бы одно из прибытия и отправления. Поездки на основе частотыGTFS frequencies.txt с exact_times = 0) не должны иметь значение SCHEDULED и вместо него должны использовать UNSCHEDULED.                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| **ПРОПУЩЕНО**   | Остановка пропускается, т.е. транспортное средство не будет останавливаться на этой остановке. Прибытие и отправление необязательны. При установке `SKIPPED` не распространяется на последующие остановки в той же поездке (т.е. транспортное средство будет останавливаться на последующих остановках в поездке, если только эти остановки не имеют значение `stop_time_update` с `schedule_relationship: SKIPPED`). Задержка от предыдущей остановки в поездке _есть_ распространяется на `SKIPPED` остановку. Другими словами, если `stop_time_update` с `arrival` или `departure` предсказание не установлено для остановки после `SKIPPED` остановки, предсказание до остановки `SKIPPED` остановки будет распространяться на остановку после `SKIPPED` остановки и последующих остановок в поездке до тех пор, пока `stop_time_update` для последующей остановки. |
| **НЕТ ДАННЫХ**  | Для этой остановки данные не предоставлены. Это означает, что информация о времени в Realtime отсутствует. При установке NO_DATA данные передаются на последующие остановки, поэтому это рекомендуемый способ указать, с какой остановки у вас нет информации о времени в Realtime. При установке NO_DATA не следует сообщать ни о прибытии, ни об отправлении.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **UNSCHEDULED** | Транспортное средство выполняет поездку на основе частотыGTFS frequencies.txt с exact_times = 0). Это значение не должно использоваться для поездок, не определенных в файле GTFS frequencies.txt, или поездок в файле GTFS frequencies.txt с exact_times = 1. Поездки, содержащие `stop_time_updates` с `schedule_relationship: UNSCHEDULED` должны также установить TripDescriptor `schedule_relationship: UNSCHEDULED` <br/><br/>**Осторожно:** это поле все еще **экспериментальный**, и подлежит изменению. Он может быть официально принят в будущем.                                                                                                                                                                                                                                                                                                             |

## _сообщение_ StopTimeProperties

ОбновлениеRealtime для определенных свойств, определенных в файле GTFS stop_times.txt.

**Внимание:** это сообщение все еще является **экспериментальным** и может быть изменено. Оно может быть официально принято в будущем.<br/>

**Поля**

| _**Имя поля**_               | _**Тип**_                                                                  | _**Требуется**_ | _**Кардинальность**_ | _**Описание**_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| ---------------------------- | -------------------------------------------------------------------------- | --------------- | -------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **назначенная_остановка_ид** | [строка](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Опционально     | Один                 | Поддерживает назначение остановок в режиме реального времени. Относится к `stop_id` определенное в GTFS `stops.txt`. <br/> Новое `assigned_stop_id` не должна приводить к тому, что конечный пользователь будет ощущать значительные различия в поездке по сравнению с `stop_id` определенные в GTFS `stop_times.txt`. Другими словами, конечный пользователь не должен воспринимать эту новую остановку как новую. `stop_id` как "необычное изменение", если новая остановка была представлена в приложении без какого-либо дополнительного контекста. Например, это поле предполагается использовать для назначения платформы с помощью `stop_id` которая относится к той же станции, что и остановка, первоначально определенная в GTFS. `stop_times.txt`. <br/> Чтобы назначить остановку без предоставления прогнозов прибытия или отправления в реальном времени, заполните это поле и установите значение `StopTimeUpdate.schedule_relationship = NO_DATA`. <br/> Если это поле заполнено, `StopTimeUpdate.stop_sequence` должно быть заполнено и `StopTimeUpdate.stop_id` не должно быть заполнено. Назначение остановок должно быть отражено и в других полях GTFS(например, `VehiclePosition.stop_id`). <br/><br/>**Осторожно:** это поле все еще **экспериментальный**, и подлежит изменению. Он может быть официально принят в будущем. |

## _сообщение_ TripProperties

Определяет обновленные свойства поездки

**Внимание:** это сообщение все еще является **экспериментальным** и может быть изменено. Оно может быть официально принято в будущем.<br/>.

**Поля**

| _**Имя поля**_     | _**Тип**_                                                                  | _**Требуется**_   | _**Кардинальность**_ | _**Описание**_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| ------------------ | -------------------------------------------------------------------------- | ----------------- | -------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **trip_id**        | [строка](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Требуется условие | Один                 | Определяет идентификатор новой поездки, которая является дубликатом существующей поездки, определенной в (CSV) GTFS trips.txt, но начнется в другую дату и/или время обслуживания (определено с помощью `TripProperties.start_date` и `TripProperties.start_time`). См. определение `trips.trip_id` в (CSV) GTFS. Его значение должно отличаться от значений, используемых в (CSV) GTFS. Это поле требуется, если `schedule_relationship` это `DUPLICATED`, иначе это поле не должно заполняться и будет игнорироваться потребителями. <br/><br/>**Осторожно:** это поле все еще **экспериментальный**, и подлежит изменению. Он может быть официально принят в будущем.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **начальная_дата** | [строка](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Требуется условие | Один                 | Дата обслуживания, на которую будет выполняться дублируемая поездка. Должна быть указана в формате ГГГГ-ММДД. Это поле обязательно для заполнения, если `schedule_relationship` это `DUPLICATED`, иначе это поле не должно заполняться и будет игнорироваться потребителями. <br/><br/>**Осторожно:** это поле все еще **экспериментальный**, и подлежит изменению. Он может быть официально принят в будущем.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **start_time**     | [строка](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Требуется условие | Один                 | Определяет время начала отправления поездки при ее дублировании. См. определение `stop_times.departure_time` в (CSV) GTFS. Плановое время прибытия и отправления для дублированной поездки рассчитывается на основе смещения между исходной поездкой `departure_time` и этим полем. Например, если в поездке GTFS есть остановка A с полем `departure_time` из `10:00:00` и остановка B с `departure_time` из `10:01:00`и это поле заполнено значением `10:30:00`то остановка B в дублированной поездке будет иметь расписание `departure_time` из `10:31:00`. Прогнозирование в реальном времени `delay` значения применяются к этому вычисленному времени Schedule для определения прогнозируемого времени. Например, если отправление `delay` из `30` предоставляется для остановки B, то прогнозируемое время отправления является `10:31:30`. Прогнозирование в реальном времени `time` Значения не имеют никакого смещения и указывают прогнозируемое время, как указано.  Например, если отправление `time` 10:31:30 для остановки B, то прогнозируемое время отправления составляет `10:31:30`.Это поле требуется, если `schedule_relationship` это `DUPLICATED`, иначе это поле не должно заполняться и будет игнорироваться потребителями. <br/><br/>**Осторожно:** это поле все еще **экспериментальный**, и подлежит изменению. Он может быть официально принят в будущем. |
| **shape_id**       | [строка](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Опционально       | Один                 | Указывает форму траектории движения транспортного средства для данной поездки, если она отличается от исходной. Относится к форме, определенной в (CSV) GTFS, или к новому объекту формы в потоке данных в реальном времени. См. определение `trips.shape_id` в (CSV) GTFS. <br/><br/>**Осторожно:** это поле все еще **экспериментальный**, и подлежит изменению. Он может быть официально принят в будущем.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |

## _сообщение_ VehiclePosition

Информация о местоположении вRealtime для данного транспортного средства.

**Поля**

| _**Имя поля**_                           | _**Тип**_                                                                  | _**Требуется**_ | _**Кардинальность**_ | _**Описание**_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| ---------------------------------------- | -------------------------------------------------------------------------- | --------------- | -------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **поездка**                              | [TripDescriptor](#message-tripdescriptor)                                  | Опционально     | Один                 | Поездка, которую обслуживает данное транспортное средство. Может быть пустым или неполным, если транспортное средство не может быть идентифицировано с данным экземпляром поездки.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| **транспортное средство**                | [VehicleDescriptor](#message-vehicledescriptor)                            | Опционально     | Один                 | Дополнительная информация о транспортном средстве, обслуживающем данную поездку. Каждая запись должна иметь **уникальный** идентификатор транспортного средства.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **позиция**                              | [Положение](#message-position)                                             | Опционально     | Один                 | Текущая позиция данного транспортного средства.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **текущая_последовательность_остановки** | [uint32](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Опционально     | Один                 | Индекс последовательности остановок текущей остановки. Значение current_stop_sequence (т.е. остановка, на которую он ссылается) определяется current_status. Если current_status отсутствует, предполагается IN_TRANSIT_TO.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| **stop_id**                              | [строка](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Опционально     | Один                 | Определяет текущую остановку. Значение должно быть таким же, как в файле stops.txt в соответствующем фиде GTFS. Если `StopTimeProperties.assigned_stop_id` используется для назначения `stop_id`, это поле должно также отражать изменение `stop_id`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **текущий_статус**                       | [VehicleStopStatus](#enum-vehiclestopstatus)                               | Опционально     | Один                 | Точное состояние транспортного средства по отношению к текущей остановке. Игнорируется, если current_stop_sequence отсутствует.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **временная метка**                      | [уинт64](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Опционально     | Один                 | Момент, в который было измерено положение транспортного средства. В POSIX-времени (т.е. количество секунд с 1 января 1970 года 00:00:00 UTC).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **уровень_загруженности**                | [CongestionLevel](#enum-congestionlevel)                                   | Опционально     | Один                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **состояние_занятости**                  | [Статус занятости](#enum-occupancystatus)                                  | _Опционально_   | Один                 | Состояние заполненности пассажирами данного транспортного средства или вагона. Если multi_carriage_details заполнено статусом занятости каждого вагона, то это поле должно описывать все транспортное средство с учетом всех вагонов, принимающих пассажиров.<br/><br/>**Осторожно:** это поле все еще **экспериментальный**, и подлежит изменению. Он может быть официально принят в будущем.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| **заполненность_в_процентах**            | [uint32](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Опционально     | Один                 | Процентное значение, указывающее на степень занятости пассажиров в транспортном средстве. Значение 100 должно представлять общее максимальное количество пассажиров, на которое рассчитано транспортное средство, включая сидячих и стоячих пассажиров, и которое допускается действующими правилами эксплуатации. Значение может превышать 100, если пассажиров больше, чем максимальная расчетная вместимость. Точность показателя заполненности_процента должна быть достаточно низкой, чтобы нельзя было отследить посадку или выход отдельных пассажиров из транспортного средства. Если в поле multi_carriage_details заполнено значение per-carriage occupancy_percentage, то это поле должно описывать все транспортное средство с учетом всех вагонов, принимающих пассажиров.<br/><br/>**Осторожно:** это поле все еще **экспериментальный**, и подлежит изменению. Он может быть официально принят в будущем. |
| **multi_carriage_details**               | [CarriageDetails](#message-CarriageDetails)                                | Опционально     | Многие               | Сведения о нескольких вагонах данного транспортного средства. Первое вхождение представляет первый вагон транспортного средства, **учитывая текущее направление движения**. Количество вхождений поля multi_carriage_details представляет собой количество вагонов транспортного средства. Оно также включает в себя вагоны, не предназначенные для посадки, такие как двигатели, вагоны технического обслуживания и т.д..., поскольку они предоставляют ценную информацию пассажирам о том, где стоять на платформе.<br/><br/>**Осторожно:** это поле все еще **экспериментальный**, и подлежит изменению. Он может быть официально принят в будущем.                                                                                                                                                                                                                                                                   |

## _enum_ VehicleStopStatus

**Значения**

| _**Значение**_    | _**Комментарий**_                                                                                                     |
| ----------------- | --------------------------------------------------------------------------------------------------------------------- |
| **INCOMING_AT**   | Транспортное средство вот-вот прибудет на остановку (на табло остановки обычно мигает символ транспортного средства). |
| **ОСТАНОВЛЕН_AT** | Транспортное средство стоит на остановке.                                                                             |
| **IN_TRANSIT_TO** | Транспортное средство сошло с предыдущей остановки и находится в пути.                                                |

## _enum_ CongestionLevel

Уровень перегруженности, который влияет на данное транспортное средство.

**Значения**

| _**Значение**_                 |
| ------------------------------ |
| **НЕИЗВЕСТНЫЙ_УРОВЕНЬ_ЗАТОРА** |
| **ПЛАВНО**                     |
| **ОСТАНОВИЛСЯ_И_ПОЕХАЛ**       |
| **КОНГЕСТИЯ**                  |
| **СИЛЬНАЯ_ЗАГРУЖЕННОСТЬ**      |

## _enum Статус занятости_

Состояние занятости пассажиров для данного транспортного средства или вагона.

Отдельные производители могут не публиковать все значения OccupancyStatus. Поэтому потребители не должны предполагать, что значения OccupancyStatus следуют линейной шкале. Потребители должны представлять значения OccupancyStatus как состояние, указанное и предназначенное производителем. Аналогично, производители должны использовать значения OccupancyStatus, которые соответствуют фактическому состоянию заполненности транспортного средства.

Для описания уровней заполненности пассажиров в линейной шкале, смотрите `occupancy_percentage`.

**Осторожно:** это поле все еще является **экспериментальным** и может быть изменено. Оно может быть официально принято в будущем.

_**Значения**_

| _**Значение**_                        | _**Комментарий**_                                                                                                                                                                                                                                |
| ------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| _**EMPTY**_                           | _Транспортное средство считается пустым по большинству показателей, на его борту мало или нет пассажиров, но оно все еще принимает пассажиров._                                                                                                  |
| _**МНОГО_МЕСТ_ДОСТУПНЫХ**_            | _В транспортном средстве или вагоне имеется большое количество свободных мест. Количество свободных мест из общего числа доступных, чтобы считаться достаточно большим для попадания в эту категорию, определяется по усмотрению производителя._ |
| _**МАЛО_МЕСТ_ДОСТУПНО**_              | _В транспортном средстве или вагоне имеется небольшое количество свободных мест. Количество свободных мест из общего числа доступных, чтобы считаться достаточно малым для попадания в эту категорию, определяется по усмотрению производителя._ |
| _**ТОЛЬКО СТОЯЧИЕ МЕСТА**_            | _В настоящее время транспортное средство или вагон может вместить только стоящих пассажиров._                                                                                                                                                    |
| _**РАЗДАВЛЕННЫЙ_СТОЯЧИЙ_ЗАЛ_ТОЛЬКО**_ | _Транспортное средство или вагон в настоящее время может вместить только стоящих пассажиров и имеет ограниченное пространство для них._                                                                                                          |
| _**ПОЛНЫЙ**_                          | _Транспортное средство считается заполненным по большинству показателей, но может все еще позволять пассажирам садиться._                                                                                                                        |
| _**НЕ_ПРИНИМАЕТ_ПАССАЖИРОВ**_         | _Транспортное средство или повозка не принимает пассажиров. Транспортное средство или вагон обычно принимает пассажиров для посадки._                                                                                                            |
| _**НЕТ_ДАННЫХ_ДОСТУПНО**_             | _В транспортном средстве или вагоне нет данных о занятости пассажиров в данный момент._                                                                                                                                                          |
| _**НЕ_ПОСАДКА**_                      | _Транспортное средство или вагон не пригодны для посадки и никогда не принимают пассажиров. Полезно для специальных транспортных средств или вагонов (моторный, ремонтный и т.д...)._                                                            |

## _сообщение_ CarriageDetails

Специфические сведения о вагоне, используемые для транспортных средств, состоящих из нескольких вагонов.

**Осторожно:** это сообщение все еще является **экспериментальным** и может быть изменено. Оно может быть официально принято в будущем.

**Поля**

| _**Имя поля**_                 | _**Тип**_                                                                  | _**Требуется**_ | _**Кардинальность**_ | _**Описание**_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| ------------------------------ | -------------------------------------------------------------------------- | --------------- | -------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **id**                         | [строка](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Опционально     | Один                 | Идентификация вагона. Должна быть уникальной для каждого транспортного средства. <br/><br/>**Осторожно:** это поле все еще **экспериментальный**, и подлежит изменению. Он может быть официально принят в будущем.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **метка**                      | [строка](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Опционально     | Один                 | видимой пользователем метки, которая может быть показана пассажиру, чтобы помочь идентифицировать вагон. Пример: "7712", "Вагон АВС-32" и т.д.. <br/>**Осторожно:** это поле все еще **экспериментальный**, и подлежит изменению. Он может быть официально принят в будущем.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| **состояние_занятости**        | [Статус занятости](#enum-occupancystatus)                                  | Опционально     | Один                 | Статус занятости для данного вагона в данном транспортном средстве. По умолчанию установлено значение `NO_DATA_AVAILABLE`.<br/><br/>**Осторожно:** это поле все еще **экспериментальный**, и подлежит изменению. Он может быть официально принят в будущем.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **заполненность_в_процентах**  | [int32](https://developers.google.com/protocol-buffers/docs/proto#scalar)  | Опционально     | Один                 | Процент занятости для данного вагона, в данном транспортном средстве. Следуют тем же правилам, что и "VehiclePosition.occupancy_percentage". Используйте -1 в случае отсутствия данных для данного вагона.<br/><br/>**Осторожно:** это поле все еще **экспериментальный**, и подлежит изменению. Он может быть официально принят в будущем.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **последовательность_вагонов** | [uint32](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Требуется       | Один                 | Определяет порядок следования данной повозки по отношению к другим повозкам в списке CarriageStatus транспортного средства. Первый вагон в направлении движения должен иметь значение 1. Второе значение соответствует второму вагону в направлении движения и должно иметь значение 2, и так далее. Например, первый вагон в направлении движения имеет значение 1. Если второй вагон в направлении движения имеет значение 3, потребители отбрасывают данные для всех вагонов (т.е. поле multi_carriage_details). Вагоны без данных должны быть представлены действительным номером carriage_sequence, а поля без данных должны быть опущены (альтернативно, эти поля также могут быть включены и установлены в значения "нет данных"). <br/><br/>**Осторожно:** это поле все еще **экспериментальный**, и подлежит изменению. Он может быть официально принят в будущем. |

## _сообщение_ Оповещение

Предупреждение, указывающее на какой-то инцидент в сети общественного транспорта.

**Поля**

| _**Имя поля**_                       | _**Тип**_                                     | _**Требуется**_ | _**Кардинальность**_ | _**Описание**_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| ------------------------------------ | --------------------------------------------- | --------------- | -------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **активный_период**                  | [Диапазон времени](#message-timerange)        | Опционально     | Многие               | Время, в течение которого оповещение должно быть показано пользователю. Если он отсутствует, оповещение будет показываться до тех пор, пока оно появляется в ленте. Если указано несколько диапазонов, оповещение будет показано во время всех из них.                                                                                                                                                                                                                                                                                                                                                                                                               |
| **информированное_существо**         | [EntitySelector](#message-entityselector)     | Требуется       | Многие               | Сущности, пользователей которых мы должны уведомить об этом оповещении.  Необходимо указать хотя бы одно информированное_существо.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| **причина**                          | [Причина](#enum-cause)                        | Опционально     | Один                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **эффект**                           | [Эффект](#enum-effect)                        | Опционально     | Один                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **url**                              | [TranslatedString](#message-translatedstring) | Опционально     | Один                 | URL, предоставляющий дополнительную информацию об оповещении.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| **заголовок_текста**                 | [TranslatedString](#message-translatedstring) | Требуется       | Один                 | Заголовок для оповещения. Эта строка обычного текста будет выделена, например, жирным шрифтом.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| **описание_текста**                  | [TranslatedString](#message-translatedstring) | Требуется       | Один                 | Описание для оповещения. Эта текстовая строка будет отформатирована как тело оповещения (или показана по явному запросу пользователя "расширить"). Информация в описании должна дополнять информацию заголовка.                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **tts_header_text**                  | [TranslatedString](#message-translatedstring) | Опционально     | Один                 | Текст, содержащий заголовок оповещения, который будет использоваться в системах преобразования текста в речь. Это поле является версией header_text для преобразования текста в речь. Оно должно содержать ту же информацию, что и заголовок_текста, но отформатированную таким образом, чтобы ее можно было прочитать с помощью преобразования текста в речь (например, убрать сокращения, прописать цифры и т.д.).                                                                                                                                                                                                                                                 |
| **tts_description_text**             | [TranslatedString](#message-translatedstring) | Опционально     | Один                 | Текст, содержащий описание оповещения для использования в системах преобразования текста в речь. Это поле является версией description_text для преобразования текста в речь. Оно должно содержать ту же информацию, что и description_text, но отформатированную таким образом, чтобы ее можно было прочитать с помощью text-to-speech (например, убрать сокращения, прописать цифры и т.д.).                                                                                                                                                                                                                                                                       |
| **уровень_серьезности**              | [SeverityLevel](#enum-severitylevel)          | Опционально     | Один                 | Уровень серьезности предупреждения.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **изображение**                      | [TranslatedImage](#message-translatedimage)   | Опционально     | Один                 | Переведенное изображение, которое будет отображаться вместе с текстом предупреждения. Используется для визуального объяснения эффекта предупреждения, связанного с объездом, закрытием станции и т.д. Изображение должно улучшать понимание предупреждения и не должно быть единственным местом размещения важной информации. Не рекомендуется использовать следующие типы изображений: изображения, содержащие в основном текст, маркетинговые или фирменные изображения, которые не добавляют никакой дополнительной информации. <br/><br/>**Осторожно:** это поле все еще **экспериментальный**, и подлежит изменению. Он может быть официально принят в будущем. |
| **изображение_альтернативный_текст** | [TranslatedString](#message-translatedstring) | Опционально     | Один                 | Текст, описывающий внешний вид связанного изображения в `image` поле (например, в случае, если изображение не может быть отображено или пользователь не может видеть изображение по причинам доступности). См. HTML [спецификацию для текста alt изображения](https://html.spec.whatwg.org/#alt). <br/><br/>**Осторожно:** это поле все еще **экспериментальный**, и подлежит изменению. Он может быть официально принят в будущем.                                                                                                                                                                                                                                  |

## _enum_ Cause

Причина данного предупреждения.

**Значения**

| _**Значение**_               |
| ---------------------------- |
| **НЕИЗВЕСТНАЯ_ПРИЧИНА**      |
| **ДРУГАЯ_ПРИЧИНА**           |
| **ТЕХНИЧЕСКАЯ_ПРОБЛЕМА**     |
| **СТРАЙК**                   |
| **ДЕМОНСТРАЦИЯ**             |
| **НЕСЧАСТНЫЙ СЛУЧАЙ**        |
| **ПРАЗДНИК**                 |
| **ПОГОДА**                   |
| **РЕМОНТ**                   |
| **СТРОИТЕЛЬСТВО**            |
| **ПОЛИЦЕЙСКАЯ_ДЕЯТЕЛЬНОСТЬ** |
| **МЕДИЦИНСКАЯ_АВАРИЯ**       |

## _enum_ Эффект

Влияние этой проблемы на затронутый объект.

**Значения**

| _**Значение**_              |
| --------------------------- |
| **НЕТ_СЕРВИСА**             |
| **СОКРАЩЕНИЕ_ОБСЛУЖИВАНИЯ** |
| **ЗНАЧИТЕЛЬНЫЕ ЗАДЕРЖКИ**   |
| **ДЕТУР**                   |
| **ДОПОЛНИТЕЛЬНАЯ_УСЛУГА**   |
| **ИЗМЕНЁННАЯ_УСЛУГА**       |
| **ДРУГОЙ_ЭФФЕКТ**           |
| **НЕИЗВЕСТНЫЙ_ЭФФЕКТ**      |
| **ОСТАНОВЛЕННЫЙ_ДВИГАТЕЛЬ** |
| **НЕТ_ЭФФЕКТА**             |
| **ПРОБЛЕМА_ДОСТУПНОСТИ**    |

## _enum_ SeverityLevel

Уровень серьезности предупреждения.

**Осторожно:** это поле все еще является **экспериментальным** и может быть изменено. Оно может быть официально принято в будущем.

**Значения**

| _**Значение**_                      |
| ----------------------------------- |
| **НЕИЗВЕСТНЫЙ_УРОВЕНЬ СЕРЬЕЗНОСТИ** |
| **ИНФОРМАЦИЯ**                      |
| **ПРЕДУПРЕЖДЕНИЕ**                  |
| **СЕРЬЕЗНАЯ**                       |

## _сообщение_ Диапазон времени

Временной интервал. Интервал считается активным в момент времени `t`, если `t` больше или равно времени начала и меньше времени окончания.

**Поля**

| _**Имя поля**_ | _**Тип**_                                                                  | _**Требуется**_   | _**Кардинальность**_ | _**Описание**_                                                                                                                                                                                                                                                   |
| -------------- | -------------------------------------------------------------------------- | ----------------- | -------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **начало**     | [уинт64](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Требуется условие | Один                 | Время начала, в POSIX-времени (т.е. количество секунд с 1 января 1970 года 00:00:00 UTC). Если отсутствует, интервал начинается с минус бесконечности.  Если указан TimeRange, необходимо указать либо начало, либо конец - оба поля не могут быть пустыми.      |
| **конец**      | [уинт64](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Требуется условие | Один                 | Время окончания, в POSIX-времени (т.е. количество секунд с 1 января 1970 года 00:00:00 UTC). Если отсутствует, интервал заканчивается на плюс бесконечности. Если указан TimeRange, необходимо указать либо начало, либо конец - оба поля не могут быть пустыми. |

## _сообщение_ Положение

Географическое положение транспортного средства.

**Поля**

| _**Имя поля**_ | _**Тип**_                                                                  | _**Требуется**_ | _**Кардинальность**_ | _**Описание**_                                                                                                                                                                                                                                                                                                                     |
| -------------- | -------------------------------------------------------------------------- | --------------- | -------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **широта**     | [float](https://developers.google.com/protocol-buffers/docs/proto#scalar)  | Требуется       | Один                 | Градусы северной широты в системе координат WGS-84.                                                                                                                                                                                                                                                                                |
| **долгота**    | [float](https://developers.google.com/protocol-buffers/docs/proto#scalar)  | Требуется       | Один                 | Градусы восточной долготы в системе координат WGS-84.                                                                                                                                                                                                                                                                              |
| **пеленг**     | [float](https://developers.google.com/protocol-buffers/docs/proto#scalar)  | Опционально     | Один                 | Пеленг в градусах по часовой стрелке от истинного севера, т.е. 0 - север, 90 - восток. Это может быть компасный пеленг или направление на следующую остановку или промежуточное место. Это направление не должно выводиться из последовательности предыдущих позиций, которые клиенты могут вычислить на основе предыдущих данных. |
| **одометр**    | [double](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Опционально     | Один                 | Значение одометра, в метрах.                                                                                                                                                                                                                                                                                                       |
| **скорость**   | [float](https://developers.google.com/protocol-buffers/docs/proto#scalar)  | Опционально     | Один                 | Мгновенная скорость, измеренная автомобилем, в метрах в секунду.                                                                                                                                                                                                                                                                   |

## _сообщение_ TripDescriptor

Дескриптор, идентифицирующий один экземпляр поездки GTFS.

Для указания одного экземпляра поездки во многих случаях достаточно одного лишь `trip_id`. Однако в следующих случаях требуется дополнительная информация для определения единственного экземпляра поездки:

*   Для поездок, определенных в файле frequencies.txt, в дополнение к `trip_id` требуются `start_date` и `start_time`.
*   Если поездка длится более 24 часов или задерживается настолько, что может столкнуться с запланированной поездкой на следующий день, то в дополнение к `trip_id` требуется `start_date`.
*   Если поле `trip_id` не может быть предоставлено, то необходимо предоставить `route_id`, `direction_id`, `start_date` и `start_time`

Во всех случаях, если `route_id` предоставляется в дополнение к `trip_id`, то `route_id` должен быть тем же самым `route_id`, который присвоен данной поездке в файле GTFS trips.txt.

Поле `trip_id` не может само по себе или в сочетании с другими полями TripDescriptor использоваться для идентификации нескольких экземпляров поездки. Например, TripDescriptor никогда не должен сам по себе указывать trip_id для поездок в GTFS frequencies.txt exact_times=0, потому что start_time также необходимо для определения одного экземпляра поездки, начинающегося в определенное время дня. Если TripDescriptor не разрешается в один экземпляр поездки (т.е. разрешается в ноль или несколько экземпляров поездки), это считается ошибкой, и объект, содержащий ошибочный TripDescriptor, может быть отброшен потребителями.

Обратите внимание, что если trip_id неизвестен, то идентификаторов последовательности станций в TripUpdate недостаточно, необходимо также предоставить stop_ids. Кроме того, должно быть указано абсолютное время прибытия/отправления.

TripDescriptor.route_id нельзя использовать в Alert EntitySelector для указания оповещения по всему маршруту, которое затрагивает все поездки по маршруту - вместо этого используйте EntitySelector.route_id.

**Поля**

| _**Имя поля**_       | _**Тип**_                                                                  | _**Требуется**_   | _**Кардинальность**_ | _**Описание**_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| -------------------- | -------------------------------------------------------------------------- | ----------------- | -------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **trip_id**          | [строка](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Требуется условие | Один                 |  trip_id из потока GTFS, на который ссылается данный селектор. Для поездок, не основанных на частоте (поездки, не определенные в файле GTFS frequencies.txt), этого поля достаточно для уникальной идентификации поездки. Для поездок на основе частоты, определенных в файле GTFS frequencies.txt, trip_id, start_time и start_date являются обязательными. Для поездок по расписанию (поездки, не определенные в файле GTFS frequencies.txt), trip_id может быть опущен, только если поездка может быть однозначно идентифицирована комбинацией route_id, direction_id, start_time и start_date, и все эти поля предоставлены. Когда связь_расписания ДУПЛИЦИРУЕТСЯ в TripUpdate, trip_id идентифицирует поездку из статической GTFS, которая должна быть продублирована. Когда связь_расписания ДУПЛИКАТИРУЕТСЯ в VehiclePosition, trip_id идентифицирует новую дублированную поездку и должен содержать значение для соответствующего TripUpdate.TripProperties.trip_id.                                                                                                                                                                                           |
| **route_id**         | [строка](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Требуется условие | Один                 |  route_id из GTFS, на который ссылается этот селектор. Если trip_id опущен, для идентификации экземпляра поездки должны быть установлены route_id, direction_id, start_time и schedule_relationship=SCHEDULED. TripDescriptor.route_id не должен использоваться в Alert EntitySelector для указания оповещения по всему маршруту, которое влияет на все поездки по маршруту - вместо этого используйте EntitySelector.route_id.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| **direction_id**     | [uint32](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Требуется условие | Один                 | direction_id из файла trips.txt фида GTFS, указывающий направление движения для поездок, на которые ссылается данный селектор. Если trip_id опущен, необходимо указать direction_id. <br/><br/>**Осторожно:** это поле все еще **экспериментальный**, и подлежит изменению. Он может быть официально принят в будущем.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **start_time**       | [строка](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Требуется условие | Один                 | Первоначально запланированное время начала данного экземпляра поездки. Если trip_id соответствует нечастотной поездке, это поле должно быть либо опущено, либо равно значению в файле GTFS. Когда trip_id соответствует поездке на основе частоты, определенной в файле GTFS frequencies.txt, start_time является обязательным и должно быть указано для обновления поездок и позиций транспортных средств. Если поездка соответствует exact_times=1 записи GTFS, то start_time должно быть на некоторое кратное (включая ноль) количество headway_secs позже, чем frequencies.txt start_time для соответствующего периода времени. Если поездка соответствует exact_times=0, то start_time может быть произвольным, и первоначально ожидается, что это будет первое отправление поездки. После установления, start_time этой поездки, основанной на частоте exact_times=0, должно считаться неизменным, даже если время первого отправления изменится - это изменение времени может быть отражено в StopTimeUpdate. Если trip_id опущен, необходимо указать start_time. Формат и семантика поля такие же, как в GTFSfrequencies.txt, например, 11:15:35 или 25:15:35. |
| **начальная_дата**   | [строка](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Требуется условие | Один                 | Дата начала данного экземпляра поездки в формате YYYYMMDD. Для поездок по расписанию (поездки, не определенные в файле GTFS frequencies.txt), это поле должно быть предоставлено, чтобы разграничить поездки, которые опаздывают настолько, что сталкиваются с поездкой по расписанию на следующий день. Например, для поезда, который отправляется в 8:00 и 20:00 каждый день и опаздывает на 12 часов, будет два разных рейса в одно и то же время. Это поле может быть предоставлено, но не является обязательным для расписаний, в которых такие столкновения невозможны - например, сервис, работающий по почасовому Schedule, где опоздание на один час уже не считается связанным с Schedule. Это поле обязательно для поездок на основе частоты, определенных в файле GTFS frequencies.txt. Если trip_id опущен, необходимо указать start_date.                                                                                                                                                                                                                                                                                                                |
| **связь_расписания** | [ScheduleRelationship](#enum-schedulerelationship-1)                       | Опционально       | Один                 | Связь между этой поездкой и статическим Schedule. Если TripDescriptor предоставлен в оповещении. `EntitySelector`, поле `schedule_relationship` поле игнорируется потребителями при идентификации соответствующего экземпляра поездки.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |

## _enum_ ScheduleRelationship

Связь между этой поездкой и статическим Schedule. Если поездка выполняется в соответствии с временным Schedule, не отраженным в GTFS, то она не должна быть отмечена как SCHEDULED, а должна быть отмечена как ADDED.

**Значения**

| _**Значение**_     | _**Комментарий**_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| ------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **ЗАПИСАНО**       | Поездка, которая выполняется в соответствии со своим Schedule GTFS, или достаточно близка к запланированной поездке, чтобы быть связанной с ней.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **ДОБАВЛЕННАЯ**    | Дополнительная поездка, которая была добавлена в дополнение к действующему Schedule, например, для замены сломанного транспортного средства или для реагирования на внезапную загрузку пассажиров. _ПРИМЕЧАНИЕ: В настоящее время поведение кормов, использующих этот режим, не определено. Есть обсуждения на GitHub GTFS [(1)](https://github.com/google/transit/issues/106) [(2)](https://github.com/google/transit/pull/221) [(3)](https://github.com/google/transit/pull/219) по поводу полного уточнения или отмены ADDED поездок, и документация будет обновлена, когда эти обсуждения будут завершены._                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| **UNSCHEDULED**    | Запущенная поездка без связанного с ней Schedule - это значение используется для идентификации поездок, определенных в файле GTFS frequencies.txt с exact_times = 0. Его не следует использовать для описания поездок, не определенных в файле GTFS frequencies.txt, или поездок в файле GTFS frequencies.txt с exact_times = 1. Поездки с `schedule_relationship: UNSCHEDULED` должны также установить все StopTimeUpdates. `schedule_relationship: UNSCHEDULED`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **ОТМЕНЕН**        | Поездка, которая существовала в Schedule, но была удалена.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| **ДУПЛИКАТИРОВАН** | Новая поездка, которая является такой же, как и существующая поездка по расписанию, за исключением даты и времени начала обслуживания. Используется с `TripUpdate.TripProperties.trip_id`, `TripUpdate.TripProperties.start_date`, и &#xA; `TripUpdate.TripProperties.start_time` для копирования существующей поездки из статической GTFS, но с другой датой и/или временем начала обслуживания. Дублирование поездки разрешено, если услуга, связанная с исходной поездкой в (CSV) GTFS (в `calendar.txt` или `calendar_dates.txt`) действует в течение следующих 30 дней. Дублируемая поездка идентифицируется через `TripUpdate.TripDescriptor.trip_id`. <br/><br/> Это перечисление не изменяет существующую поездку, на которую ссылаются `TripUpdate.TripDescriptor.trip_id` - Если производитель хочет отменить оригинальную поездку, он должен опубликовать отдельное сообщение со значением CANCELED. `TripUpdate` со значением CANCELED. Поездки, определенные в GTFS `frequencies.txt` с `exact_times` который пуст или равен `0` не могут быть продублированы. Сайт `VehiclePosition.TripDescriptor.trip_id` для новой поездки должен содержать соответствующее значение из параметра `TripUpdate.TripProperties.trip_id` и `VehiclePosition.TripDescriptor.ScheduleRelationship` также должно быть установлено в `DUPLICATED`.  <br/><br/>_Существующие производители и потребители, которые использовали перечисление ADDED для представления дублированных поездок, должны следовать инструкции [руководство по миграции](https://github.com/google/transit/blob/master/gtfs-realtime/spec/en/examples/migration-duplicated.md) для перехода на перечисление DUPLICATED._ |

## _сообщение_ VehicleDescriptor

Идентификационная информация для транспортного средства, выполняющего поездку.

**Поля**

| _**Имя поля**_    | _**Тип**_                                                                  | _**Требуется**_ | _**Кардинальность**_ | _**Описание**_                                                                                                                                                                                                                                                                                                                        |
| ----------------- | -------------------------------------------------------------------------- | --------------- | -------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **id**            | [строка](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Опционально     | Один                 | Внутренний системный идентификатор транспортного средства. Должен быть **уникальный** для каждого транспортного средства и используется для отслеживания транспортного средства по мере его прохождения через систему. Этот идентификатор не должен быть виден конечному пользователю; для этой цели используйте метку **метка** поле |
| **метка**         | [строка](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Опционально     | Один                 | видимую для пользователя метку, т.е. то, что должно быть показано пассажиру для идентификации нужного транспортного средства.                                                                                                                                                                                                         |
| **номерной_знак** | [строка](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Опционально     | Один                 | Номерной знак автомобиля.                                                                                                                                                                                                                                                                                                             |

## _сообщение_ EntitySelector

Селектор для сущности в канале GTFS. Значения полей должны соответствовать соответствующим полям в фиде GTFS. Должен быть указан хотя бы один спецификатор. Если задано несколько, они должны интерпретироваться как объединенные логическим оператором `AND`. Кроме того, комбинация спецификаторов должна соответствовать соответствующей информации в канале GTFS. Другими словами, для того чтобы оповещение было применено к сущности в GTFS, оно должно соответствовать всем полям EntitySelector. Например, EntitySelector, включающий поля `route_id`: "5" и `route_type: "3"`, применяется только к автобусу `route_id`: "5" - он не применяется к любым другим маршрутам `типа route_type: "3"`. Если производитель хочет, чтобы предупреждение распространялось на `route_id`: "5", а также к `маршруту_типа: "3"`, он должен предоставить два отдельных EntitySelectors, один ссылающийся на `route_id`: "5" и другой, ссылающийся на `тип_маршрута: "3"`.

Должен быть указан хотя бы один спецификатор - все поля в EntitySelector не могут быть пустыми.

**Поля**

| _**Имя поля**_   | _**Тип**_                                                                  | _**Требуется**_   | _**Кардинальность**_ | _**Описание**_                                                                                                                                                                                                                                                                                                                                                                             |
| ---------------- | -------------------------------------------------------------------------- | ----------------- | -------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **agency_id**    | [строка](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Требуется условие | Один                 |  agency_id из фида GTFS, на который ссылается этот селектор.                                                                                                                                                                                                                                                                                                                               |
| **route_id**     | [строка](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Требуется условие | Один                 |  route_id из GTFS, на который ссылается данный селектор. Если указан direction_id, должен быть указан и route_id.                                                                                                                                                                                                                                                                          |
| **тип_маршрута** | [int32](https://developers.google.com/protocol-buffers/docs/proto#scalar)  | Требуется условие | Один                 | Тип_маршрута из GTFS, на которую ссылается этот селектор.                                                                                                                                                                                                                                                                                                                                  |
| **direction_id** | [uint32](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Требуется условие | Один                 | Направление_id из файла trips.txt, используемого для выбора всех поездок в одном направлении для маршрута, указанного route_id. Если указан direction_id, необходимо также указать route_id. <br/><br/>**Осторожно:** это поле все еще **экспериментальный**, и подлежит изменению. Он может быть официально принят в будущем.<br/>                                                        |
| **поездка**      | [TripDescriptor](#message-tripdescriptor)                                  | Требуется условие | Один                 | Экземпляр поездки из GTFS, на который ссылается данный селектор. Этот TripDescriptor должен ссылаться на один экземпляр поездки в данных GTFS (например, производитель не может предоставить только trip_id для поездок exact_times=0). Если поле ScheduleRelationship заполнено в этом TripDescriptor, оно будет проигнорировано потребителями при попытке идентифицировать поездку GTFS. |
| **stop_id**      | [строка](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Требуется условие | Один                 |  stop_id из потока GTFS, на который ссылается данный селектор.                                                                                                                                                                                                                                                                                                                             |

## _сообщение_ TranslatedString

Интернационализированное сообщение, содержащее языковые версии фрагмента текста или URL. Будет выбрана одна из строк из сообщения. Разрешение происходит следующим образом: Если language пользовательского интерфейса совпадает с кодом language перевода, выбирается первый подходящий перевод. Если language пользовательского интерфейса по умолчанию (например, английский) совпадает с кодом language перевода, выбирается первый подходящий перевод. Если какой-то перевод имеет неопределенный language код, выбирается этот перевод.

**Поля**

| _**Имя поля**_ | _**Тип**_                       | _**Требуется**_ | _**Кардинальность**_ | _**Описание**_                               |
| -------------- | ------------------------------- | --------------- | -------------------- | -------------------------------------------- |
| **перевод**    | [Перевод](#message-translation) | Требуется       | Многие               | Должен быть указан как минимум один перевод. |

## _сообщение_ Перевод

Локализованная строка, сопоставленная с language.

| _**Имя поля**_ | _**Тип**_                                                                  | _**Требуется**_   | _**Кардинальность**_ | _**Описание**_                                                                                                                                                                                                                                         |
| -------------- | -------------------------------------------------------------------------- | ----------------- | -------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **текст**      | [строка](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Требуется         | Один                 | Строка UTF-8, содержащая сообщение.                                                                                                                                                                                                                    |
| **language**   | [строка](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Требуется условие | Один                 | Код language BCP-47. Может быть опущен, если language неизвестен или если интернационализация для фида не проводится вообще. Только один перевод может иметь тег неопределенного language - если переводов больше одного, language должен быть указан. |

## _сообщение_ TranslatedImage

Интернационализированное сообщение, содержащее языковые версии изображения. Одно из изображений из сообщения будет выбрано. Разрешение происходит следующим образом: Если language пользовательского интерфейса совпадает с кодом language перевода, выбирается первый подходящий перевод. Если language пользовательского интерфейса по умолчанию (например, английский) совпадает с кодом language перевода, выбирается первый подходящий перевод. Если какой-то перевод имеет неопределенный language код, выбирается этот перевод.

**Осторожно:** это сообщение все еще является **экспериментальным** и может быть изменено. Оно может быть официально принято в будущем.

**Поля**

| _**Имя поля**_                 | _**Тип**_                                 | _**Требуется**_ | _**Кардинальность**_ | _**Описание**_                                                         |
| ------------------------------ | ----------------------------------------- | --------------- | -------------------- | ---------------------------------------------------------------------- |
| **локализованное_изображение** | [LocalizedImage](#message-localizedimage) | Требуется       | Многие               | Должно быть предоставлено как минимум одно локализованное изображение. |

## _сообщение_ LocalizedImage

URL-адрес локализованного изображения, сопоставленный с language.

| _**Имя поля**_ | _**Тип**_                                                                  | _**Требуется**_   | _**Кардинальность**_ | _**Описание**_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| -------------- | -------------------------------------------------------------------------- | ----------------- | -------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **url**        | [строка](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Требуется         | Один                 | Строка, содержащая URL-адрес ссылки на изображение. Размер изображения, на которое дана ссылка, не должен превышать 2 МБ. Если изображение изменяется настолько существенно, что требуется обновление на стороне потребителя, производитель должен обновить URL на новый.<br/><br/> URL должен быть полностью определенным URL, включающим http:// или https://, а все специальные символы в URL должны быть правильно приведены. См. [https://www.w3.org/Addressing/URL/4_URI_Recommentations.html для](https://www.w3.org/Addressing/URL/4_URI_Recommentations.html for) описание того, как создавать полностью квалифицированные значения URL. |
| **тип_медиа**  | [строка](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Требуется         | Один                 | IANA media type для указания типа отображаемого изображения. Тип должен начинаться с "image/".                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **language**   | [строка](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Требуется условие | Один                 | Код language BCP-47. Может быть опущен, если language неизвестен или если интернационализация для фида не проводится вообще. Только один перевод может иметь тег неопределенного language - если переводов больше одного, language должен быть указан.                                                                                                                                                                                                                                                                                                                                                                                            |

## форма_сообщения_

Описывает физический путь, по которому движется транспортное средство, когда форма не является частью (CSV) GTFS, например, для специального объезда. Формы принадлежат к маршрутам и состоят из закодированной полилинии для более эффективной передачи. Фигуры не обязательно должны точно повторять расположение остановок, но все остановки в поездке должны лежать в пределах небольшого расстояния от фигуры для этой поездки, т.е. вблизи от отрезков прямых линий, соединяющих точки фигуры.

**Внимание:** это сообщение все еще является **экспериментальным** и может быть изменено. Оно может быть официально принято в будущем.<br/>.

**Поля**

| _**Имя поля**_               | _**Тип**_                                                                  | _**Требуется**_ | _**Кардинальность**_ | _**Описание**_                                                                                                                                                                                                                                                                                                                                                                             |
| ---------------------------- | -------------------------------------------------------------------------- | --------------- | -------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **shape_id**                 | [строка](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Требуется       | Один                 | Идентификатор фигуры. Должен отличаться от любого `shape_id` определенного в (CSV) GTFS. <br/><br/>**Осторожно:** это поле все еще **экспериментальный**, и подлежит изменению. Он может быть официально принят в будущем.                                                                                                                                                                 |
| **закодированная_полилиния** | [строка](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Требуется       | Один                 | Кодированное полилинейное представление фигуры. Эта полилиния должна содержать не менее двух точек. Для получения дополнительной информации о кодированных полилиниях см. <https://developers.google.com/maps/documentation/utilities/polylinealgorithm> <br/><br/>**Осторожно:** это поле все еще **экспериментальный**, и подлежит изменению. Он может быть официально принят в будущем. |
