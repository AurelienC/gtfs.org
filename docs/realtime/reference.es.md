# Referencia RealtimeGTFS

Un feed GTFS Realtime permite a las agencias de transporte proporcionar a los consumidores información Realtime sobre las interrupciones de su servicio (estaciones cerradas, líneas no operativas, retrasos importantes, etc.), la ubicación de sus vehículos y las horas de llegada previstas.

La versión 2.0 de la especificación de los piensos se discute y documenta en este sitio. Las versiones válidas son "2.0", "1.0".

### Definiciones de términos

#### Exigida

En GTFS v2.0 y superiores, la columna _Required_ describe qué campos debe proporcionar un productor para que los datos de tránsito sean válidos y tengan sentido para una aplicación consumidora.

Los siguientes valores se utilizan en el campo _Obligatorio_:

*   **Obligatorio**: Este campo debe ser proporcionado por un productor de feeds GTFS.
*   Requerido**condicionalmente**: Este campo es obligatorio en determinadas condiciones, que se indican en la _descripción_ del campo. Fuera de estas condiciones, el campo es opcional.
*   **Opcional**: Este campo es opcional y no es necesario que los productores lo implementen. Sin embargo, si los datos están disponibles en los sistemas de localización automática de vehículos subyacentes (por ejemplo, VehiclePosition `timestamp`) se recomienda que los productores proporcionen estos campos opcionales cuando sea posible.

_Tenga en cuenta que los requisitos semánticos no se definieron en la versión 1.0 GTFS, por lo que los feeds con `gtfs_realtime_version` de `1` pueden no cumplir estos requisitos (véase [la propuesta de requisitos semánticos](https://github.com/google/transit/pull/64)_ para más detalles).

#### Cardinalidad

_La_ cardinalidad representa el número de elementos que se pueden proporcionar para un campo concreto, con los siguientes valores:

*   **Uno** - Se puede proporcionar un único elemento uno para este campo. Esto se corresponde con [las cardinalidades _requeridas_ y _opcionales_](https://developers.google.com/protocol-buffers/docs/proto#simple) de [Protocol Buffer](https://developers.google.com/protocol-buffers/docs/proto#simple).
*   **Muchos** - Se pueden proporcionar muchos elementos (0, 1 o más) para este campo. Esto se corresponde con la cardinalidad [_repetida_](https://developers.google.com/protocol-buffers/docs/proto#simple) del búfer de protocolo.

Consulte siempre los campos _Obligatorio_ y _Descripción_ para ver si un campo es obligatorio, condicionalmente obligatorio u opcional. Consulte [GTFS-Realtime/proto/GTFS-Realtime.proto">`GTFS`](<https://github.com/google/transit/blob/master/\<glossary variable=>).proto para conocer la cardinalidad del búfer de protocolo.

#### Tipos de datos del búfer de protocolo

Los siguientes tipos de datos del buffer de protocolo se utilizan para describir los elementos de alimentación:

*   **mensaje**: Tipo complejo
*   **enum**: Lista de valores fijos

#### Campos experimentales

Los campos etiquetados como **experimentales** están sujetos a cambios y aún no han sido adoptados formalmente en la especificación. Un campo **experimental** puede ser adoptado formalmente en el futuro.

## Índice de elementos

*   [FeedMessage](#message-feedmessage)
    *   [FeedHeader](#message-feedheader)

        *   [Incrementalidad](#enum-incrementality)

    *   [FeedEntity](#message-feedentity)

        *   [TripUpdate](#message-tripupdate)

            *   [TripDescriptor](#message-tripdescriptor)

                *   [ScheduleRelationship](#enum-schedulerelationship-1)

            *   [VehicleDescriptor](#message-vehicledescriptor)

            *   [StopTimeUpdate](#message-stoptimeupdate)

                *   [StopTimeEvent](#message-stoptimeevent)
                *   [Relación de horarios](#enum-schedulerelationship)
                *   [StopTimeProperties](#message-stoptimeproperties)

            *   [TripProperties](#message-tripproperties)

        *   [VehiclePosition](#message-vehicleposition)

            *   [TripDescriptor](#message-tripdescriptor)

                *   [Relación de horarios](#enum-schedulerelationship-1)

            *   [VehicleDescriptor](#message-vehicledescriptor)

            *   [Posición](#message-position)

            *   [VehicleStopStatus](#enum-vehiclestopstatus)

            *   [CongestionLevel](#enum-congestionlevel)

            *   [OccupancyStatus](#enum-occupancystatus)

            *   [CarriageDetails](#message-carriagedetails)

        *   [Alerta](#message-alert)

            *   [TimeRange](#message-timerange)

            *   [EntitySelector](#message-entityselector)

                *   [TripDescriptor](#message-tripdescriptor)

                    *   [ScheduleRelationship](#enum-schedulerelationship-1)

            *   [Causa](#enum-cause)

            *   [Efecto](#enum-effect)

            *   [TranslatedString](#message-translatedstring)

                *   [Traducción](#message-translation)

            *   [SeverityLevel](#enum-severitylevel)

## Elementos

## _mensaje_ FeedMessage

El contenido de un mensaje de alimentación. Cada mensaje del flujo se obtiene como respuesta a una solicitud HTTP GET apropiada. Un feed Realtime se define siempre en relación con un feed GTFS existente. Todos los identificadores de entidad se resuelven con respecto al feed GTFS.

**Campos**

| _**Nombre del campo**_ | _**Tipo**_                        | _**Exigida**_ | _**Cardinalidad**_ | _**Descripción**_                                                                                                                                                                                                                                            |
| ---------------------- | --------------------------------- | ------------- | ------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **cabecera**           | [FeedHeader](#message-feedheader) | Exigida       | Uno                | Metadatos sobre este feed y su mensaje.                                                                                                                                                                                                                      |
| **entidad**            | [FeedEntity](#message-feedentity) | Condicional   | Muchos             | Contenido del feed.  Si hay información en tiempo real disponible para el sistema de tránsito, este campo debe ser proporcionado.  Si este campo está vacío, los consumidores deben asumir que no hay información en tiempo real disponible para el sistema. |

## _mensaje_ FeedHeader

Metadatos sobre un feed, incluidos en los mensajes del feed.

**Campos**

| _**Nombre del campo**_    | _**Tipo**_                                                                 | _**Exigida**_ | _**Cardinalidad**_ | _**Descripción**_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| ------------------------- | -------------------------------------------------------------------------- | ------------- | ------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **gtfs_realtime_version** | [cadena](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Exigida       | Uno                | Versión de la especificación del feed. La versión actual es la 2.0.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| **incrementalidad**       | [Incrementalidad](#enum-incrementality)                                    | Exigida       | Uno                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **timestamp**             | [uint64](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Exigida       | Uno                | Esta marca de tiempo identifica el momento en que se ha creado el contenido de este feed (en tiempo de servidor). En tiempo POSIX (es decir, número de segundos desde el 1 de enero de 1970 00:00:00 UTC). Para evitar la desviación de tiempo entre los sistemas que producen y consumen información Realtime, se recomienda encarecidamente derivar la marca de tiempo de un servidor de tiempo. Es completamente aceptable utilizar servidores de estrato 3 o incluso de estratos inferiores, ya que las diferencias de tiempo de hasta un par de segundos son tolerables. |

## _enum_ Incrementalidad

Determina si la obtención actual es incremental.

*   **FULL_DATASET**: esta actualización de la alimentación sobrescribirá toda la información Realtime precedente para la alimentación. Por lo tanto, se espera que esta actualización proporcione una instantánea completa de toda la información conocida Realtime tiempo real.
*   **DIFERENCIAL**: actualmente, este modo **no está soportado** y el comportamiento **no está especificado** para los feeds que utilizan este modo. Hay discusiones en la [GTFS-realtime">lista de correo](<https://groups.google.com/group/\<glossary variable=>) de [GTFS-realtime">GTFS Realtime](<https://groups.google.com/group/\<glossary variable=>) en torno a la especificación completa del comportamiento del modo DIFERENCIAL y la documentación se actualizará cuando esas discusiones estén finalizadas.

**Valores**

| _**Valor**_                     |
| ------------------------------- |
| **CONJUNTO_DE_DATOS_COMPLETOS** |
| **DIFERENCIAL**                 |

## _mensaje_ FeedEntity

Definición (o actualización) de una entidad en el feed de tránsito. Si la entidad no se está eliminando, debe rellenarse exactamente uno de los campos 'trip_update', 'vehicle', 'alert' y 'shape'.

**Campos**

| _**Nombre del campo**_ | _**Tipo**_                                                                 | _**Exigida**_ | _**Cardinalidad**_ | _**Descripción**_                                                                                                                                                                                                                                                                                                                                                 |
| ---------------------- | -------------------------------------------------------------------------- | ------------- | ------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **id**                 | [cadena](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Exigida       | Uno                | Identificador único para esta entidad. Los identificadores se utilizan únicamente para proporcionar apoyo a la incrementalidad. Las entidades reales referenciadas por el feed deben ser especificadas por selectores explícitos (ver EntitySelector más abajo para más información).                                                                             |
| **is_deleted**         | [bool](https://developers.google.com/protocol-buffers/docs/proto#scalar)   | Opcional      | Uno                | Si esta entidad debe ser eliminada. Sólo debe proporcionarse para los flujos de datos con un incremento DIFERENCIAL - este campo NO debe proporcionarse para los flujos de datos con un incremento TOTAL.                                                                                                                                                         |
| **trip_update**        | [TripUpdate](#message-tripupdate)                                          | Condicional   | Uno                | Datos sobre los retrasos de salida Realtime de un viaje.  Debe proporcionarse al menos uno de los campos trip_update, vehicle, alert, o shape - todos estos campos no pueden estar vacíos.                                                                                                                                                                        |
| **vehículo**           | [Posición del vehículo](#message-vehicleposition)                          | Condicional   | Uno                | Datos sobre la posición en Realtime real de un vehículo. Debe proporcionarse al menos uno de los campos trip_update, vehicle, alert, o shape - todos estos campos no pueden estar vacíos.                                                                                                                                                                         |
| **alerta**             | [Alerta](#message-alert)                                                   | Condicional   | Uno                | Datos sobre la alerta Realtime tiempo real. Se debe proporcionar al menos uno de los campos trip_update, vehicle, alert, o shape - todos estos campos no pueden estar vacíos.                                                                                                                                                                                     |
| **forma**              | [Forma](#message-shape)                                                    | Condicional   | Uno                | Datos sobre las formas añadidas Realtime Realtime, por ejemplo, para un desvío. Se debe proporcionar al menos uno de los campos trip_update, vehicle, alert, o shape - todos estos campos no pueden estar vacíos. <br /><br />**Precaución:** este campo sigue siendo **experimental**y está sujeta a cambios. Es posible que se adopte formalmente en el futuro. |

## _mensaje_ TripUpdate

ActualizaciónRealtime del progreso de un vehículo a lo largo de un viaje. Por favor, consulte también la discusión general de las [Realtime/trip-updates">entidades de](</\<glossary variable=>) actualización de viajes.

Dependiendo del valor de ScheduleRelationship, un TripUpdate puede especificar

*   Un viaje que procede a lo largo del Schedule.
*   Un viaje que procede a lo largo de una ruta pero que no tiene un Schedule fijo.
*   Un viaje que se ha añadido o eliminado con respecto al Schedule.
*   Un nuevo viaje que es una copia de un viaje existente en GTFS estático. Se ejecutará en la fecha y hora de servicio especificada en TripProperties.

Las actualizaciones pueden ser para eventos futuros, previstos de llegada/salida, o para eventos pasados que ya ocurrieron. En la mayoría de los casos, la información sobre eventos pasados es un valor medido, por lo que se recomienda que su valor de incertidumbre sea 0. Aunque puede haber casos en los que esto no se cumpla, por lo que se permite tener un valor de incertidumbre diferente de 0 para los eventos pasados. Si la incertidumbre de una actualización no es 0, o bien la actualización es una predicción aproximada para un viaje que no se ha completado o la medición no es precisa o la actualización era una predicción para el pasado que no ha sido verificada después de que el evento ocurriera.

Si un vehículo está sirviendo a varios viajes dentro del mismo bloque (para más información sobre viajes y bloques, consulte [Schedule/reference/#tripstxt">GTFS trips.txt](</\<glossary variable=>)):

*   el feed debe incluir un TripUpdate para el viaje que está siendo servido por el vehículo. Se anima a los productores a incluir TripUpdates para uno o más viajes después del viaje actual en el bloque de este vehículo si el productor confía en la calidad de las predicciones para estos viajes futuros. La inclusión de múltiples TripUpdates para el mismo vehículo evita la aparición de predicciones para los pasajeros cuando el vehículo pasa de un viaje a otro y también ofrece a los pasajeros un aviso anticipado de los retrasos que afectan a los viajes posteriores (por ejemplo, cuando el retraso conocido supera los tiempos de escala previstos entre los viajes).
*   no se requiere que las respectivas entidades TripUpdate se añadan a la alimentación en el mismo orden en que están programadas en el bloque. Por ejemplo, si hay viajes con `trip_ids` 1, 2 y 3 que pertenecen todos a un bloque, y el vehículo realiza el viaje 1, luego el viaje 2 y luego el viaje 3, las entidades `trip_update` pueden aparecer en cualquier orden - por ejemplo, se permite añadir el viaje 2, luego el viaje 1 y luego el viaje 3.

Tenga en cuenta que la actualización puede describir un viaje que ya ha finalizado, para lo cual basta con proporcionar una actualización para la última parada del viaje. Si la hora de llegada a la última parada es pasada, el cliente concluirá que todo el viaje es pasado (es posible, aunque sin consecuencias, proporcionar también actualizaciones para las paradas anteriores). Esta opción es más relevante para un viaje que ha finalizado antes de lo Schedule, pero según el Schedule, el viaje sigue en curso en el momento actual. Si se eliminan las actualizaciones de este viaje, el cliente podría suponer que el viaje sigue en curso. Tenga en cuenta que el proveedor de alimentación puede, pero no está obligado, a purgar las actualizaciones pasadas - este es un caso en el que esto sería prácticamente útil.

**Campos**

| _**Nombre del campo**_ | _**Tipo**_                                                                 | _**Exigida**_ | _**Cardinalidad**_ | _**Descripción**_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| ---------------------- | -------------------------------------------------------------------------- | ------------- | ------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **viaje**              | [TripDescriptor](#message-tripdescriptor)                                  | Exigida       | Uno                | El viaje al que se aplica este mensaje. Puede haber como máximo una entidad TripUpdate por cada instancia de viaje real. Si no hay ninguna, significa que no hay información de predicción disponible. Esto significa _no_ significa que el viaje está progresando de acuerdo con la Schedule.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| **vehículo**           | [VehicleDescriptor](#message-vehicledescriptor)                            | Opcional      | Uno                | Información adicional sobre el vehículo que está sirviendo este viaje.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| **stop_time_update**   | [StopTimeUpdate](#message-stoptimeupdate)                                  | Condicional   | Muchos             | Actualizaciones de StopTimes para el viaje (tanto futuras, es decir, predicciones, como en algunos casos, pasadas, es decir, las que ya ocurrieron). Las actualizaciones deben estar ordenadas por stop_sequence, y se aplican a todas las paradas siguientes del viaje hasta la siguiente stop_time_update especificada.  Debe proporcionarse al menos una actualización de hora de parada para el viaje, a menos que la relación schedule_relationship sea CANCELADA o DUPLICADA; si el viaje se cancela, no es necesario proporcionar ninguna actualización de hora de parada. Si el viaje se duplica, puede proporcionarse stop_time_updates para indicar la información en tiempo real del nuevo viaje.                                                                                                                                                                                                                                                                                                                                                                                  |
| **timestamp**          | [uint64](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Opcional      | Uno                | El momento más reciente en el que se midió el progreso en tiempo real del vehículo para estimar los StopTimes en el futuro. Cuando se proporcionan StopTimes en el pasado, las horas de llegada/salida pueden ser anteriores a este valor. En tiempo POSIX (es decir, el número de segundos desde el 1 de enero de 1970 00:00:00 UTC).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| **retraso**            | [int32](https://developers.google.com/protocol-buffers/docs/proto#scalar)  | Opcional      | Uno                | La desviación del Schedule actual para el viaje. El retraso sólo debe especificarse cuando la predicción se da en relación con algún Schedule existente en GTFS.<br />El retraso (en segundos) puede ser positivo (lo que significa que el vehículo está retrasado) o negativo (lo que significa que el vehículo está adelantado al Schedule). Un retraso de 0 significa que el vehículo está exactamente a tiempo.<br />La información de retraso en StopTimeUpdates tiene prioridad sobre la información de retraso a nivel de viaje, de tal manera que el retraso a nivel de viaje sólo se propaga hasta la siguiente parada a lo largo del viaje con un valor de retraso StopTimeUpdate especificado.<br />Se recomienda encarecidamente a los proveedores de información que proporcionen un valor TripUpdate.timestamp que indique cuándo se actualizó por última vez el valor del retraso, para poder evaluar la frescura de los datos.<br /><br />**Precaución:** este campo sigue siendo **experimental**y está sujeta a cambios. Es posible que se adopte formalmente en el futuro. |
| **trip_properties**    | [TripProperties](#message-tripproperties)                                  | Opcional      | Uno                | Proporciona las propiedades actualizadas del viaje. <br /><br />**Precaución:** este mensaje sigue siendo **experimental**y está sujeta a cambios. Es posible que se adopte formalmente en el futuro.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |

## _mensaje_ StopTimeEvent

Información de tiempo para un único evento previsto (ya sea de llegada o de salida). El tiempo consiste en el retraso y/o el tiempo estimado, y la incertidumbre.

*   El retraso debe utilizarse cuando la predicción se da en relación con algún Schedule existente en GTFS.
*   El tiempo debe indicarse tanto si hay un Schedule previsto como si no. Si se especifican tanto el tiempo como el retraso, el tiempo tendrá prioridad (aunque normalmente, el tiempo, si se da para un viaje programado, debería ser igual al tiempo programado en GTFS + el retraso).

La incertidumbre se aplica igualmente al tiempo y al retraso. La incertidumbre especifica aproximadamente el error esperado en el retraso real (pero tenga en cuenta que aún no definimos su significado estadístico preciso). Es posible que la incertidumbre sea 0, por ejemplo, para los trenes que se conducen bajo control de tiempo por ordenador.

**Campos**

| _**Nombre del campo**_ | _**Tipo**_                                                                | _**Exigida**_ | _**Cardinalidad**_ | _**Descripción**_                                                                                                                                                                                                                                                                                                                                                 |
| ---------------------- | ------------------------------------------------------------------------- | ------------- | ------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **retraso**            | [int32](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Condicional   | Uno                | El retraso (en segundos) puede ser positivo (lo que significa que el vehículo se retrasa) o negativo (lo que significa que el vehículo se adelanta al Schedule). Un retraso de 0 significa que el vehículo está exactamente a tiempo.  Tanto el retraso como el tiempo deben ser proporcionados dentro de un StopTimeEvent - ambos campos no pueden estar vacíos. |
| **tiempo**             | [int64](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Condicional   | Uno                | Evento como tiempo absoluto. En tiempo POSIX (es decir, número de segundos desde el 1 de enero de 1970 00:00:00 UTC). Dentro de un StopTimeEvent debe proporcionarse el retardo o la hora - ambos campos no pueden estar vacíos.                                                                                                                                  |
| **incertidumbre**      | [int32](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Opcional      | Uno                | Si se omite la incertidumbre, se interpreta como desconocida. Para especificar una predicción completamente segura, establezca su incertidumbre en 0.                                                                                                                                                                                                             |

## _mensaje_ StopTimeUpdate

ActualizaciónRealtime de los eventos de llegada y/o salida de una parada determinada en un viaje. Consulte también la discusión general sobre las actualizaciones de la hora de la parada en la documentación de [Realtime/trip-updates">las entidades](</\<glossary variable=>) [TripDescriptor](#message-tripdescriptor) y [Realtime/trip-updates">Trip Updates](</\<glossary variable=>).

Las actualizaciones pueden ser suministradas tanto para eventos pasados como futuros. El productor puede, aunque no es obligatorio, eliminar los eventos pasados.

La actualización está vinculada a una parada específica a través de stop_sequence o stop_id, por lo que uno de estos campos debe estar necesariamente establecido. Si el mismo stop_id es visitado más de una vez en un viaje, entonces stop_sequence debe ser proporcionado en todos los StopTimeUpdates para ese stop_id en ese viaje.

**Campos**

| _**Nombre del campo**_         | _**Tipo**_                                                                 | _**Exigida**_ | _**Cardinalidad**_ | _**Descripción**_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| ------------------------------ | -------------------------------------------------------------------------- | ------------- | ------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **stop_sequence**              | [uint32](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Condicional   | Uno                | Debe ser el mismo que en stop_times.txt en el feed GTFS correspondiente.  Se debe proporcionar stop_sequence o stop_id dentro de un StopTimeUpdate - ambos campos no pueden estar vacíos. stop_sequence es necesario para los viajes que visitan el mismo stop_id más de una vez (por ejemplo, un bucle) para desambiguar para qué parada es la predicción. Si `StopTimeProperties.assigned_stop_id` está rellenado, entonces `stop_sequence` debe estar rellenado.                                                            |
| **stop_id**                    | [cadena](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Condicional   | Uno                | Debe ser el mismo que en stops.txt en el feed GTFS correspondiente. La stop_sequence o el stop_id deben ser proporcionados dentro de un StopTimeUpdate - ambos campos no pueden estar vacíos. Si `StopTimeProperties.assigned_stop_id` se rellena, es preferible omitir `stop_id` y utilizar sólo `stop_sequence`. Si `StopTimeProperties.assigned_stop_id` y `stop_id` se rellenan, `stop_id` debe coincidir con `assigned_stop_id`.                                                                                          |
| **llegada**                    | [StopTimeEvent](#message-stoptimeevent)                                    | Condicional   | Uno                | Si schedule_relationship está vacía o es SCHEDULED, la llegada o la salida debe proporcionarse dentro de un StopTimeUpdate - ambos campos no pueden estar vacíos. arrival y departure pueden estar vacíos cuando schedule_relationship es SKIPPED.  Si schedule_relationship es NO_DATA, arrival y departure deben estar vacíos.                                                                                                                                                                                               |
| **salida**                     | [StopTimeEvent](#message-stoptimeevent)                                    | Condicional   | Uno                | Si schedule_relationship está vacía o es SCHEDULED, la llegada o la salida debe proporcionarse dentro de un StopTimeUpdate - ambos campos no pueden estar vacíos. arrival y departure pueden estar vacíos cuando schedule_relationship es SKIPPED.  Si schedule_relationship es NO_DATA, arrival y departure deben estar vacíos.                                                                                                                                                                                               |
| **departure_occupancy_status** | [OccupancyStatus](#enum-occupancystatus)                                   | Opcional      | Uno                | Estado previsto de la ocupación de los pasajeros del vehículo inmediatamente después de la salida de la parada indicada. Si se proporciona, debe indicarse stop_sequence. Para proporcionar departure_occupancy_status sin proporcionar ninguna predicción de llegada o salida en tiempo real, rellene este campo y establezca StopTimeUpdate.schedule_relationship = NO_DATA. <br /><br />**Precaución:** este campo sigue siendo **experimental**y está sujeta a cambios. Es posible que se adopte formalmente en el futuro. |
| **schedule_relationship**      | [ScheduleRelationship](#enum-schedulerelationship)                         | Opcional      | Uno                | La relación por defecto es SCHEDULED.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **stop_time_properties**       | [StopTimeProperties](#message-stoptimeproperties)                          | Opcional      | Uno                | ActualizacionesRealtime para determinadas propiedades definidas en el stop_times.txt GTFS <br /><br />**Precaución:** este campo sigue siendo **experimental**y está sujeta a cambios. Es posible que se adopte formalmente en el futuro.                                                                                                                                                                                                                                                                                      |

## _enum_ RelaciónCronológica

La relación entre este StopTime y el Schedule estático.

**Valores**

| _**Valor**_     | _**Comentario**_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| --------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **SCHEDULED**   | El vehículo avanza de acuerdo con su Schedule estático de paradas, aunque no necesariamente de acuerdo con los tiempos del Schedule. Este es el **por defecto** comportamiento. Debe proporcionarse al menos uno de llegada y otro de salida. Los viajes basados en la frecuenciaGTFS frequencies.txt con exact_times = 0) no deben tener un valor SCHEDULED y deben utilizar UNSCHEDULED en su lugar.                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| **SKIPPED**     | La parada se salta, es decir, el vehículo no se detendrá en esta parada. La llegada y la salida son opcionales. Cuando se establece `SKIPPED` no se propaga a las paradas subsiguientes del mismo viaje (es decir, el vehículo se detendrá en las paradas subsiguientes del viaje a menos que esas paradas también tengan un `stop_time_update` con `schedule_relationship: SKIPPED`). El retraso de una parada anterior en el viaje _hace_ se propaga a la `SKIPPED` parada. En otras palabras, si un `stop_time_update` con una `arrival` o `departure` predicción no se establece para una parada posterior a la `SKIPPED` parada, la predicción anterior a la `SKIPPED` se propagará a la parada posterior a la `SKIPPED` y a las paradas posteriores del trayecto hasta que se proporcione un `stop_time_update` para una parada posterior. |
| **NO_DATA**     | No se dan datos para esta parada. Indica que no hay información de tiempo Realtime disponible. Cuando se establece NO_DATA se propaga a través de las paradas subsiguientes, por lo que es la forma recomendada de especificar a partir de qué parada no se dispone de información horaria en Realtime real. Cuando se establece NO_DATA no se debe suministrar ni la llegada ni la salida.                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **UNSCHEDULED** | El vehículo está realizando un viaje basado en la frecuenciaGTFS frequencies.txt con exact_times = 0). Este valor no debe utilizarse para viajes que no estén definidos en GTFS frequencies. frequencies.txt, o viajes en GTFS frequencies.txt.txt con exact_times = 1. Los viajes que contienen `stop_time_updates` con `schedule_relationship: UNSCHEDULED` también deben establecer el TripDescriptor `schedule_relationship: UNSCHEDULED` <br /><br />**Precaución:** este campo sigue siendo **experimental**y está sujeta a cambios. Es posible que se adopte formalmente en el futuro.                                                                                                                                                                                                                                                    |

## _mensaje_ StopTimeProperties

ActualizaciónRealtime de ciertas propiedades definidas en GTFS stop_times.txttxt.

**Atención:** este mensaje es todavía **experimental** y está sujeto a cambios. Es posible que se adopte formalmente en el futuro.<br/>

**Campos**

| _**Nombre del campo**_ | _**Tipo**_                                                                 | _**Exigida**_ | _**Cardinalidad**_ | _**Descripción**_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| ---------------------- | -------------------------------------------------------------------------- | ------------- | ------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **assigned_stop_id**   | [cadena](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Opcional      | Uno                | Admite la asignación de paradas en tiempo real. Se refiere a un `stop_id` definido en el GTFS `stops.txt`. <br /> El nuevo `assigned_stop_id` no debe dar lugar a una experiencia de viaje significativamente diferente para el usuario final que el `stop_id` definidos en GTFS `stop_times.txt`. En otras palabras, el usuario final no debería ver esta nueva `stop_id` como un "cambio inusual" si la nueva parada se presentó dentro de una aplicación sin ningún contexto adicional. Por ejemplo, este campo está destinado a ser utilizado para la asignación de plataformas utilizando una `stop_id` que pertenece a la misma estación que la parada originalmente definida en GTFS GTFS `stop_times.txt`. <br /> Para asignar una parada sin proporcionar ninguna predicción de llegada o salida en tiempo real, rellene este campo y establezca `StopTimeUpdate.schedule_relationship = NO_DATA`. <br /> Si este campo está poblado `StopTimeUpdate.stop_sequence` debe ser rellenado y `StopTimeUpdate.stop_id` no debe poblarse. Las asignaciones de paradas deben reflejarse también en otros campos GTFS(por ejemplo `VehiclePosition.stop_id`). <br /><br />**Precaución:** este campo sigue siendo **experimental**y está sujeta a cambios. Es posible que se adopte formalmente en el futuro. |

## _mensaje_ TripProperties

Define las propiedades actualizadas del viaje

**Precaución**: este mensaje es todavía **experimental** y está sujeto a cambios. Es posible que se adopte formalmente en el futuro.<br/>.

**Campos**

| _**Nombre del campo**_ | _**Tipo**_                                                                 | _**Exigida**_ | _**Cardinalidad**_ | _**Descripción**_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| ---------------------- | -------------------------------------------------------------------------- | ------------- | ------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **trip_id**            | [cadena](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Condicional   | Uno                | Define el identificador de un nuevo viaje que es un duplicado de un viaje existente definido en (CSV) GTFS trips.txt pero que comenzará en una fecha y/o hora de servicio diferente (definida mediante `TripProperties.start_date` y `TripProperties.start_time`). Véase la definición de `trips.trip_id` en el (CSV) GTFS. Su valor debe ser diferente de los utilizados en el (CSV) GTFS. Este campo es necesario si `schedule_relationship` es `DUPLICATED`En caso contrario, este campo no debe rellenarse y será ignorado por los consumidores. <br /><br />**Precaución:** este campo sigue siendo **experimental**y está sujeta a cambios. Es posible que se adopte formalmente en el futuro.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| **fecha_de_inicio**    | [cadena](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Condicional   | Uno                | Fecha de servicio en la que se ejecutará el viaje duplicado. Debe indicarse en formato AAAAMMDD. Este campo es necesario si `schedule_relationship` es `DUPLICATED`En caso contrario, este campo no debe rellenarse y será ignorado por los consumidores. <br /><br />**Precaución:** este campo sigue siendo **experimental**y está sujeta a cambios. Es posible que se adopte formalmente en el futuro.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **start_time**         | [cadena](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Condicional   | Uno                | Define la hora de inicio del viaje cuando se duplica. Véase la definición de `stop_times.departure_time` en (CSV) GTFS. Las horas de llegada y salida programadas para el viaje duplicado se calculan basándose en el desfase entre el viaje original `departure_time` y este campo. Por ejemplo, si un viaje GTFS tiene la parada A con un `departure_time` de `10:00:00` y la parada B con `departure_time` de `10:01:00`y este campo se rellena con el valor de `10:30:00`la parada B del viaje duplicado tendrá un horario `departure_time` de `10:31:00`. La predicción en tiempo real `delay` se aplican a este Schedule calculado para determinar la hora prevista. Por ejemplo, si se proporciona una salida `delay` de `30` se proporciona para la parada B, entonces la hora de salida prevista es `10:31:30`. La predicción en tiempo real `time` Los valores de predicción en tiempo real no tienen ningún desplazamiento aplicado e indican la hora prevista tal y como se ha proporcionado.  Por ejemplo, si se proporciona una salida `time` que representa las 10:31:30 para la parada B, la hora de salida prevista es `10:31:30`Este campo es necesario si `schedule_relationship` es `DUPLICATED`En caso contrario, este campo no debe rellenarse y será ignorado por los consumidores. <br /><br />**Precaución:** este campo sigue siendo **experimental**y está sujeta a cambios. Es posible que se adopte formalmente en el futuro. |
| **shape_id**           | [cadena](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Opcional      | Uno                | Especifica la forma de la trayectoria del vehículo para este viaje cuando difiere de la original. Se refiere a una forma definida en el GTFS (CSV) o a una nueva entidad de forma en una alimentación en tiempo real. Véase la definición del `trips.shape_id` en (CSV) GTFS. <br /><br />**Precaución:** este campo sigue siendo **experimental**y está sujeta a cambios. Es posible que se adopte formalmente en el futuro.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |

## _mensaje_ VehiclePosition

Información de posicionamientoRealtime tiempo real para un vehículo determinado.

**Campos**

| _**Nombre del campo**_      | _**Tipo**_                                                                 | _**Exigida**_ | _**Cardinalidad**_ | _**Descripción**_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| --------------------------- | -------------------------------------------------------------------------- | ------------- | ------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **viaje**                   | [TripDescriptor](#message-tripdescriptor)                                  | Opcional      | Uno                | El viaje al que sirve este vehículo. Puede estar vacío o ser parcial si el vehículo no puede identificarse con una instancia de viaje determinada.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **vehículo**                | [VehicleDescriptor](#message-vehicledescriptor)                            | Opcional      | Uno                | Información adicional sobre el vehículo que está sirviendo este viaje. Cada entrada debe tener un **único** ID del vehículo.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **posición**                | [Posición](#message-position)                                              | Opcional      | Uno                | Posición actual de este vehículo.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **current_stop_sequence**   | [uint32](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Opcional      | Uno                | El índice de la secuencia de paradas de la parada actual. El significado de current_stop_sequence (es decir, la parada a la que se refiere) viene determinado por current_status. Si falta current_status se asume IN_TRANSIT_TO.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **stop_id**                 | [cadena](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Opcional      | Uno                | Identifica la parada actual. El valor debe ser el mismo que en stops.txt en el feed GTFS correspondiente. Si `StopTimeProperties.assigned_stop_id` se utiliza para asignar un `stop_id`, este campo también debe reflejar el cambio en `stop_id`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **estado_actual**           | [VehicleStopStatus](#enum-vehiclestopstatus)                               | Opcional      | Uno                | El estado exacto del vehículo con respecto a la parada actual. Se ignora si falta current_stop_sequence.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| **timestamp**               | [uint64](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Opcional      | Uno                | Momento en el que se midió la posición del vehículo. En tiempo POSIX (es decir, número de segundos desde el 1 de enero de 1970 00:00:00 UTC).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| **nivel_de_congestión**     | [CongestionLevel](#enum-congestionlevel)                                   | Opcional      | Uno                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **estado_de_ocupación**     | [OccupancyStatus](#enum-occupancystatus)                                   | _Opcional_    | Uno                | El estado de ocupación de los pasajeros del vehículo o del vagón. Si multi_carriage_details se rellena con el estado de ocupación por vagón, este campo debe describir todo el vehículo teniendo en cuenta todos los vagones que aceptan pasajeros.<br /><br />**Precaución:** este campo sigue siendo **experimental**y está sujeta a cambios. Es posible que se adopte formalmente en el futuro.                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **porcentaje_de_ocupación** | [uint32](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Opcional      | Uno                | Valor porcentual que indica el grado de ocupación de los pasajeros en el vehículo. El valor 100 debe representar la ocupación máxima total para la que se diseñó el vehículo, incluida la capacidad de asientos y de pie, y que permiten las normas de explotación vigentes. El valor puede ser superior a 100 si hay más pasajeros que la capacidad máxima diseñada. La precisión de occupancy_percentage debe ser lo suficientemente baja como para que no se pueda hacer un seguimiento de los pasajeros que suben o bajan del vehículo. Si multi_carriage_details se rellena con occupancy_percentage por vagón, este campo debe describir todo el vehículo teniendo en cuenta todos los vagones que aceptan pasajeros.<br /><br />**Precaución:** este campo sigue siendo **experimental**y está sujeta a cambios. Es posible que se adopte formalmente en el futuro. |
| **multi_carriage_details**  | [CarriageDetails](#message-CarriageDetails)                                | Opcional      | Muchos             | Detalles de los vagones múltiples de este vehículo dado. La primera ocurrencia representa el primer vagón del vehículo, **teniendo en cuenta el sentido actual de la marcha**. El número de apariciones del campo multi_carriage_details representa el número de vagones del vehículo. También incluye los vagones no embarcables, como los motores, los vagones de mantenimiento, etc., ya que proporcionan información valiosa a los pasajeros sobre dónde situarse en un andén.<br /><br />**Precaución:** este campo sigue siendo **experimental**y está sujeta a cambios. Es posible que se adopte formalmente en el futuro.                                                                                                                                                                                                                                          |

## _enum_ VehicleStopStatus

**Valores**

| _**Valor**_       | _**Comentario**_                                                                                                     |
| ----------------- | -------------------------------------------------------------------------------------------------------------------- |
| **INCOMING_AT**   | El vehículo está a punto de llegar a la parada (en una pantalla de parada, el símbolo del vehículo suele parpadear). |
| **STOPPED_AT**    | El vehículo está parado en la parada.                                                                                |
| **IN_TRANSIT_TO** | El vehículo ha salido de la parada anterior y está en tránsito.                                                      |

## _enum_ CongestionLevel

Nivel de congestión que está afectando a este vehículo.

**Valores**

| _**Valor**_                  |
| ---------------------------- |
| **UNKNOWN_CONGESTION_LEVEL** |
| **RUNNING_SMOOTHLY**         |
| **STOP_AND_GO**              |
| **CONGESTIÓN**               |
| **CONGESTIÓN_GRAVE**         |

## _enum OccupancyStatus_

El estado de ocupación de los pasajeros para el vehículo o el vagón.

Los productores individuales pueden no publicar todos los valores de OccupancyStatus. Por lo tanto, los consumidores no deben asumir que los valores de OccupancyStatus siguen una escala lineal. Los consumidores deben representar los valores de OccupancyStatus como el estado indicado y previsto por el productor. Del mismo modo, los productores deben utilizar los valores de OccupancyStatus que correspondan a los estados reales de ocupación del vehículo.

Para describir los niveles de ocupación de los pasajeros en una escala lineal, véase `occupancy_percentage`.

**Precaución**: este campo es todavía **experimental** y está sujeto a cambios. Es posible que se adopte formalmente en el futuro.

_**Valores**_

| _**Valor**_                         | _**Comentario**_                                                                                                                                                                                                                                                     |
| ----------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| _**VACÍO**_                         | _El vehículo se considera vacío según la mayoría de las medidas, y tiene pocos o ningún pasajero a bordo, pero sigue aceptando pasajeros._                                                                                                                           |
| _**MUCHOS_ASIENTOS_DISPONIBLES**_   | _El vehículo o vagón tiene un gran número de asientos disponibles. La cantidad de asientos libres del total de asientos disponibles para que se considere lo suficientemente grande como para entrar en esta categoría se determina a discreción del productor._     |
| _**POCOS_ASIENTOS_DISPONIBLES**_    | _El vehículo o vagón tiene un número reducido de asientos disponibles. La cantidad de asientos libres del total de asientos disponibles para ser considerados lo suficientemente pequeños como para caer en esta categoría se determina a discreción del productor._ |
| _**STANDING_ROOM_ONLY**_            | _El vehículo o vagón sólo puede acoger actualmente a pasajeros de pie._                                                                                                                                                                                              |
| _**SÓLO_ESPACIO_DE_PIE APLASTADO**_ | _El vehículo o vagón sólo puede acomodar actualmente a pasajeros de pie y tiene un espacio limitado para ellos._                                                                                                                                                     |
| _**COMPLETO**_                      | _El vehículo se considera lleno según la mayoría de las medidas, pero puede seguir permitiendo el embarque de pasajeros._                                                                                                                                            |
| _**NO_ACEPTA_PASAJEROS**_           | _El vehículo o el vagón no acepta pasajeros. El vehículo o vagón suele aceptar pasajeros para embarcar._                                                                                                                                                             |
| _**NO_DATA_AVAILABLE**_             | _El vehículo o vagón no tiene datos de ocupación disponibles en ese momento._                                                                                                                                                                                        |
| _**NOT_BOARDABLE**_                 | _El vehículo o vagón no es embarcable y nunca acepta pasajeros. Útil para vehículos o vagones especiales (motor, vagón de mantenimiento, etc...)._                                                                                                                   |

## _mensaje_ CarriageDetails

Detalles específicos del vagón, utilizados para los vehículos compuestos por varios vagones.

**Precaución**: este mensaje es todavía **experimental** y está sujeto a cambios. Es posible que se adopte formalmente en el futuro.

**Campos**

| _**Nombre del campo**_      | _**Tipo**_                                                                 | _**Exigida**_ | _**Cardinalidad**_ | _**Descripción**_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| --------------------------- | -------------------------------------------------------------------------- | ------------- | ------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **id**                      | [cadena](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Opcional      | Uno                | Identificación del vagón. Debe ser única por vehículo. <br /><br />**Precaución:** este campo sigue siendo **experimental**y está sujeta a cambios. Es posible que se adopte formalmente en el futuro.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **etiqueta**                | [cadena](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Opcional      | Uno                | etiqueta visible para el usuario que puede mostrarse al pasajero para ayudar a identificar el transporte. Ejemplo: "7712", "Vagón ABC-32", etc. <br />**Precaución:** este campo sigue siendo **experimental**y está sujeta a cambios. Es posible que se adopte formalmente en el futuro.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **estado_de_ocupación**     | [OccupancyStatus](#enum-occupancystatus)                                   | Opcional      | Uno                | Estado de ocupación de este vagón, en este vehículo. El valor por defecto es `NO_DATA_AVAILABLE`.<br /><br />**Precaución:** este campo sigue siendo **experimental**y está sujeta a cambios. Es posible que se adopte formalmente en el futuro.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| **porcentaje_de_ocupación** | [int32](https://developers.google.com/protocol-buffers/docs/proto#scalar)  | Opcional      | Uno                | Porcentaje de ocupación para este vagón determinado, en este vehículo. Sigue las mismas reglas que "VehiclePosition.occupancy_percentage". Utilice -1 en caso de que no haya datos disponibles para este vagón determinado.<br /><br />**Precaución:** este campo sigue siendo **experimental**y está sujeta a cambios. Es posible que se adopte formalmente en el futuro.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| **carriage_sequence**       | [uint32](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Exigida       | Uno                | Identifica el orden de este vagón con respecto a los demás vagones de la lista de CarriageStatus del vehículo. El primer vagón en el sentido de la marcha debe tener un valor de 1. El segundo valor corresponde al segundo vagón en el sentido de la marcha y debe tener un valor de 2, y así sucesivamente. Por ejemplo, el primer vagón en el sentido de la marcha tiene un valor de 1. Si el segundo vagón en el sentido de la marcha tiene un valor de 3, los consumidores descartarán los datos de todos los vagones (es decir, el campo multi_carriage_details). Los vagones sin datos deben representarse con un número válido de carriage_sequence y los campos sin datos deben omitirse (alternativamente, esos campos también podrían incluirse y establecerse con los valores "sin datos"). <br /><br />**Precaución:** este campo sigue siendo **experimental**y está sujeta a cambios. Es posible que se adopte formalmente en el futuro. |

## _mensaje_ Alerta

Una alerta que indica algún tipo de incidente en la red de transporte público.

**Campos**

| _**Nombre del campo**_     | _**Tipo**_                                    | _**Exigida**_ | _**Cardinalidad**_ | _**Descripción**_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| -------------------------- | --------------------------------------------- | ------------- | ------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **período_activo**         | [TimeRange](#message-timerange)               | Opcional      | Muchos             | Tiempo en el que la alerta debe mostrarse al usuario. Si falta, la alerta se mostrará mientras aparezca en el feed. Si se indican varios intervalos, la alerta se mostrará durante todos ellos.                                                                                                                                                                                                                                                                                                                                                                                                             |
| **entidad_informada**      | [EntitySelector](#message-entityselector)     | Exigida       | Muchos             | Entidades a cuyos usuarios debemos notificar esta alerta.  Se debe proporcionar al menos una informed_entity.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **causa**                  | [Causa](#enum-cause)                          | Opcional      | Uno                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| **efecto**                 | [Efecto](#enum-effect)                        | Opcional      | Uno                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| **url**                    | [TranslatedString](#message-translatedstring) | Opcional      | Uno                | La URL que proporciona información adicional sobre la alerta.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **texto_cabecera**         | [TranslatedString](#message-translatedstring) | Exigida       | Uno                | Cabecera de la alerta. Esta cadena de texto plano se resaltará, por ejemplo, en negrita.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **description_text**       | [TranslatedString](#message-translatedstring) | Exigida       | Uno                | Descripción de la alerta. Esta cadena de texto plano se formateará como cuerpo de la alerta (o se mostrará en una solicitud explícita de "expansión" por parte del usuario). La información de la descripción debe añadirse a la información de la cabecera.                                                                                                                                                                                                                                                                                                                                                |
| **tts_header_text**        | [TranslatedString](#message-translatedstring) | Opcional      | Uno                | Texto que contiene la cabecera de la alerta que se utilizará para las implementaciones de texto a voz. Este campo es la versión de texto a voz de header_text. Debe contener la misma información que header_text pero formateada de manera que pueda leerse como texto a voz (por ejemplo, se eliminan las abreviaturas, se deletrean los números, etc.)                                                                                                                                                                                                                                                   |
| **tts_description_text**   | [TranslatedString](#message-translatedstring) | Opcional      | Uno                | Texto que contiene una descripción de la alerta que se utilizará para las implementaciones de texto a voz. Este campo es la versión de texto a voz de description_text. Debe contener la misma información que description_text pero formateada de manera que pueda leerse como texto a voz (por ejemplo, se han eliminado las abreviaturas, se han deletreado los números, etc.)                                                                                                                                                                                                                           |
| **nivel_de_gravedad**      | [SeverityLevel](#enum-severitylevel)          | Opcional      | Uno                | Gravedad de la alerta.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **imagen**                 | [TranslatedImage](#message-translatedimage)   | Opcional      | Uno                | TranslatedImage que se mostrará junto al texto de la alerta. Se utiliza para explicar visualmente el efecto de la alerta de un desvío, el cierre de una estación, etc. La imagen debe mejorar la comprensión de la alerta y no debe ser la única ubicación de la información esencial. Se desaconsejan los siguientes tipos de imágenes: imágenes que contengan principalmente texto, imágenes de marketing o de marca que no añadan información adicional. <br /><br />**Precaución:** este campo sigue siendo **experimental**y está sujeta a cambios. Es posible que se adopte formalmente en el futuro. |
| **image_alternative_text** | [TranslatedString](#message-translatedstring) | Opcional      | Uno                | Texto que describe el aspecto de la imagen vinculada en el `image` (por ejemplo, en caso de que la imagen no pueda mostrarse o el usuario no pueda ver la imagen por razones de accesibilidad). Consulte la especificación HTML [para el texto de la imagen alt](https://html.spec.whatwg.org/#alt). <br /><br />**Precaución:** este campo sigue siendo **experimental**y está sujeta a cambios. Es posible que se adopte formalmente en el futuro.                                                                                                                                                        |

## _enum_ Causa

Causa de esta alerta.

**Valores**

| _**Valor**_            |
| ---------------------- |
| **UNKNOWN_CAUSE**      |
| **OTRA_CAUSA**         |
| **PROBLEMA_TÉCNICO**   |
| **HUELGA**             |
| **DEMONSTRACIÓN**      |
| **ACCIDENTE**          |
| **VACACIONES**         |
| **TIEMPO**             |
| **MANTENIMIENTO**      |
| **CONSTRUCCIÓN**       |
| **ACTIVIDAD_POLICIAL** |
| **EMERGENCIA_MÉDICA**  |

## _enum_ Efecto

El efecto de este problema en la entidad afectada.

**Valores**

| _**Valor**_                   |
| ----------------------------- |
| **SIN_SERVICIO**              |
| **SERVICIO_REDUCIDO**         |
| **RETRASOS_IMPORTANTES**      |
| **RETRASO**                   |
| **SERVICIO_ADICIONAL**        |
| **SERVICIO_MODIFICADO**       |
| **OTROS_EFECTOS**             |
| **EFECTO_DESCONOCIDO**        |
| **STOP_MOVED**                |
| **NO_EFECTO**                 |
| **PROBLEMA_DE_ACCESIBILIDAD** |

## _enum_ SeverityLevel

La gravedad de la alerta.

**Precaución**: este campo es todavía **experimental** y está sujeto a cambios. Es posible que se adopte formalmente en el futuro.

**Valores**

| _**Valor**_          |
| -------------------- |
| **UNKNOWN_SEVERITY** |
| **INFO**             |
| **WARNING**          |
| **SEVERE**           |

## _mensaje_ TimeRange

Un intervalo de tiempo. El intervalo se considera activo en el momento `t` si `t` es mayor o igual que la hora de inicio y menor que la hora de finalización.

**Campos**

| _**Nombre del campo**_ | _**Tipo**_                                                                 | _**Exigida**_ | _**Cardinalidad**_ | _**Descripción**_                                                                                                                                                                                                                                                              |
| ---------------------- | -------------------------------------------------------------------------- | ------------- | ------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **inicio**             | [uint64](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Condicional   | Uno                | Hora de inicio, en tiempo POSIX (es decir, número de segundos desde el 1 de enero de 1970 00:00:00 UTC). Si falta, el intervalo comienza en menos infinito.  Si se proporciona un TimeRange, se debe proporcionar el inicio o el final - ambos campos no pueden estar vacíos.  |
| **fin**                | [uint64](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Condicional   | Uno                | Hora de finalización, en tiempo POSIX (es decir, número de segundos desde el 1 de enero de 1970 00:00:00 UTC). Si falta, el intervalo termina en el infinito. Si se proporciona un TimeRange, se debe proporcionar el inicio o el final - ambos campos no pueden estar vacíos. |

## _mensaje_ Posición

Posición geográfica de un vehículo.

**Campos**

| _**Nombre del campo**_ | _**Tipo**_                                                                | _**Exigida**_ | _**Cardinalidad**_ | _**Descripción**_                                                                                                                                                                                                                                                                                                                                 |
| ---------------------- | ------------------------------------------------------------------------- | ------------- | ------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **latitud**            | [float](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Exigida       | Uno                | Grados Norte, en el sistema de coordenadas WGS-84.                                                                                                                                                                                                                                                                                                |
| **longitud**           | [float](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Exigida       | Uno                | Grados Este, en el sistema de coordenadas WGS-84.                                                                                                                                                                                                                                                                                                 |
| **rumbo**              | [float](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Opcional      | Uno                | Rumbo, en grados, en el sentido de las agujas del reloj desde el Norte verdadero, es decir, 0 es Norte y 90 es Este. Puede ser el rumbo de la brújula o la dirección hacia la siguiente parada o ubicación intermedia. No debe deducirse de la secuencia de posiciones anteriores, que los clientes pueden calcular a partir de datos anteriores. |
| **cuentakilómetros**   | [doble](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Opcional      | Uno                | Valor del cuentakilómetros, en metros.                                                                                                                                                                                                                                                                                                            |
| **velocidad**          | [float](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Opcional      | Uno                | Velocidad momentánea medida por el vehículo, en metros por segundo.                                                                                                                                                                                                                                                                               |

## _mensaje_ TripDescriptor

Descriptor que identifica una única instancia de un viaje GTFS.

Para especificar una única instancia de viaje, en muchos casos basta con un `trip_id`. Sin embargo, los siguientes casos requieren información adicional para resolver una única instancia de viaje:

*   Para los viajes definidos en frequencies.txt, se requieren `start_date` y `start_time` además de `trip_id`
*   Si el viaje dura más de 24 horas, o se retrasa de tal manera que podría colisionar con un viaje programado al día siguiente, se requiere `start_date` además de `trip_id`
*   Si no se puede proporcionar el campo `trip_id`, se debe proporcionar `route_id`, `direction_id`, `start_date` y `start_time`

En todos los casos, si se proporciona `route_id` además de `trip_id`, entonces el `route_id` debe ser el mismo `route_id` asignado al viaje dado en GTFS trips.txt.

El campo `trip_id` no puede utilizarse, por sí mismo o en combinación con otros campos de TripDescriptor, para identificar varias instancias de viaje. Por ejemplo, un TripDescriptor nunca debe especificar trip_id por sí mismo para viajes GTFS frequencies.txt.txt exact_times=0 porque start_time también se requiere para resolver una única instancia de viaje que comienza a una hora específica del día. Si el TripDescriptor no se resuelve a una única instancia de viaje (es decir, se resuelve a cero o múltiples instancias de viaje), se considera un error y la entidad que contiene el TripDescriptor erróneo puede ser descartada por los consumidores.

Tenga en cuenta que si no se conoce trip_id, los identificadores de secuencia de estación en TripUpdate no son suficientes, y también deben proporcionarse los stop_ids. Además, deben proporcionarse las horas absolutas de llegada/salida.

TripDescriptor.route_id no puede utilizarse dentro de un EntitySelector de alerta para especificar una alerta de toda la ruta que afecte a todos los viajes de una ruta - utilice EntitySelector.route_id en su lugar.

**Campos**

| _**Nombre del campo**_    | _**Tipo**_                                                                 | _**Exigida**_ | _**Cardinalidad**_ | _**Descripción**_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| ------------------------- | -------------------------------------------------------------------------- | ------------- | ------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **trip_id**               | [cadena](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Condicional   | Uno                | El trip_id del feed GTFS al que se refiere este selector. Para los viajes no basados en la frecuencia (viajes no definidos en GTFS frequencies.txt), este campo es suficiente para identificar de forma exclusiva el viaje. Para los viajes basados en la frecuencia definida en GTFS frequencies. frequencies.txt, se requiere trip_id, start_time y start_date. Para los viajes basados en la programación (viajes no definidos en GTFS frequencies frequencies.txttxt), trip_id sólo puede omitirse si el viaje puede identificarse de forma exclusiva mediante una combinación de route_id, direction_id, start_time y start_date, y se proporcionan todos esos campos. Cuando schedule_relationship es DUPLICATED dentro de un TripUpdate, el trip_id identifica el viaje del GTFS estático que se va a duplicar. Cuando schedule_relationship se DUPLICA dentro de un VehiclePosition, el trip_id identifica el nuevo viaje duplicado y debe contener el valor deltrip_id correspondiente de TripUpdate.TripProperties.                                                                                                                                                                                                                       |
| **route_id**              | [cadena](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Condicional   | Uno                | El route_id del GTFS al que se refiere este selector. Si se omite trip_id, route_id, direction_id, start_time y schedule_relationship=SCHEDULED deben establecerse para identificar una instancia de viaje. TripDescriptor.route_id no debe utilizarse dentro de un EntitySelector de alerta para especificar una alerta de toda la ruta que afecte a todos los viajes de una ruta - utilice EntitySelector.route_id en su lugar.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| **direction_id**          | [uint32](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Condicional   | Uno                | El direction_id del archivo GTFS feed trips.txt, que indica la dirección del viaje para los viajes a los que se refiere este selector. Si se omite trip_id, se debe proporcionar direction_id. <br /><br />**Precaución:** este campo sigue siendo **experimental**y está sujeta a cambios. Es posible que se adopte formalmente en el futuro.<br />                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| **start_time**            | [cadena](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Condicional   | Uno                | La hora de inicio programada inicialmente para esta instancia de viaje. Cuando el trip_id corresponde a un viaje no basado en la frecuencia, este campo debe omitirse o ser igual al valor en el feed GTFS. Cuando el trip_id corresponde a un viaje basado en frecuencias definido en GTFS frequencies.txt, start_time hora de inicio es necesaria y debe especificarse para las actualizaciones del viaje y las posiciones de los vehículos. Si el viaje corresponde a exact_times=1 registro GTFS, entonces start_time debe ser algún múltiplo (incluyendo cero) de headway_secs más tarde que frequencies. frequencies.txt start_time para el período de tiempo correspondiente. Si el viaje corresponde a exact_times=0, entonces su start_time puede ser arbitrario, e inicialmente se espera que sea la primera salida del viaje. Una vez establecida, la hora start_time inicio de este viaje basado en exact_times=0 debe considerarse inmutable, incluso si la primera hora de salida cambia -- ese cambio de hora puede reflejarse en cambio en un StopTimeUpdate. Si se omite trip_id, debe proporcionarse start_time. El formato y la semántica del campo es el mismo que el de GTFSfrequencies.txt, por ejemplo, 11:15:35 o 25:15:35. |
| **fecha_de_inicio**       | [cadena](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Condicional   | Uno                | La fecha de inicio de esta instancia de viaje en formato AAAAMMDD. En el caso de los viajes programados (viajes no definidos en GTFS frequencies.txtxt), este campo debe proporcionarse para desambiguar los viajes que llegan tan tarde como para colisionar con un viaje programado en un día siguiente. Por ejemplo, para un tren que sale a las 8:00 y a las 20:00 todos los días, y que tiene un retraso de 12 horas, habría dos viajes distintos a la misma hora. Este campo puede proporcionarse pero no es obligatorio para los horarios en los que tales colisiones son imposibles - por ejemplo, un servicio que funciona con un Schedule en el que un vehículo que llega una hora tarde ya no se considera relacionado con el Schedule. Este campo es obligatorio para los viajes basados en la frecuencia definida en GTFS frequencies.txt. Si se omite trip_id, debe indicarse start_date.                                                                                                                                                                                                                                                                                                                                             |
| **schedule_relationship** | [ScheduleRelationship](#enum-schedulerelationship-1)                       | Opcional      | Uno                | La relación entre este viaje y el Schedule estático. Si se proporciona TripDescriptor en una alerta `EntitySelector`El campo `schedule_relationship` el campo es ignorado por los consumidores al identificar la instancia de viaje correspondiente.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |

## _enum_ RelaciónCronológica

La relación entre este viaje y la Schedule estática. Si un viaje se realiza de acuerdo con un Schedule temporal, no reflejado en GTFS, entonces no debe marcarse como PROGRAMADO, sino como AÑADIDO.

**Valores**

| _**Valor**_     | _**Comentario**_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| --------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **SCHEDULED**   | Viaje que se está realizando de acuerdo con su Horario GTFS, o está lo suficientemente cerca del viaje programado como para ser asociado a él.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **AÑADIDO**     | Un viaje extra que se añadió además de un Schedule en funcionamiento, por ejemplo, para sustituir un vehículo roto o para responder a una carga repentina de pasajeros. _NOTA: Actualmente, el comportamiento no está especificado para las alimentaciones que utilizan este modo. Hay discusiones en el GitHub de GTFS [(1)](https://github.com/google/transit/issues/106) [(2)](https://github.com/google/transit/pull/221) [(3)](https://github.com/google/transit/pull/219) en torno a la especificación completa o a la eliminación de los viajes AÑADIDOS y la documentación se actualizará cuando estas discusiones hayan finalizado._                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **UNSCHEDULED** | Un viaje que se está ejecutando sin Schedule asociado - este valor se utiliza para identificar los viajes definidos en GTFS frequencies.txt frequencies.txt txt con exact_times = 0. No debe utilizarse para describir los viajes no definidos en GTFS frequencies.txt, o viajes en GTFS frequencies.txt con exact_times = 1. Los viajes con `schedule_relationship: UNSCHEDULED` también deben establecer todos los StopTimeUpdates `schedule_relationship: UNSCHEDULED`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **CANCELADO**   | Un viaje que existía en el Schedule pero que fue eliminado.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| **DUPLICADO**   | Un nuevo viaje que es el mismo que un viaje programado existente, excepto por la fecha y hora de inicio del servicio. Se utiliza con `TripUpdate.TripProperties.trip_id`, `TripUpdate.TripProperties.start_date`y `TripUpdate.TripProperties.start_time` para copiar un viaje existente desde GTFS estático pero que se inicia en una fecha y/o hora de servicio diferente. La duplicación de un viaje está permitida si el servicio relacionado con el viaje original en (CSV) GTFS (en `calendar.txt` o `calendar_dates.txt`) está operando dentro de los próximos 30 días. El viaje que se va a duplicar se identifica mediante `TripUpdate.TripDescriptor.trip_id`. <br /><br /> Esta enumeración no modifica el viaje existente referenciado por `TripUpdate.TripDescriptor.trip_id` - si un productor quiere cancelar el viaje original, debe publicar un `TripUpdate` con el valor de CANCELADO. Viajes definidos en GTFS `frequencies.txt` con `exact_times` que esté vacío o sea igual a `0` no pueden ser duplicados. El `VehiclePosition.TripDescriptor.trip_id` para el nuevo viaje debe contener el valor correspondiente de `TripUpdate.TripProperties.trip_id` y `VehiclePosition.TripDescriptor.ScheduleRelationship` también debe establecerse en `DUPLICATED`.  <br /><br />_Los productores y consumidores existentes que utilizaban la enumeración ADDED para representar viajes duplicados deben seguir la [guía de migración](https://github.com/google/transit/blob/master/gtfs-realtime/spec/en/examples/migration-duplicated.md) para pasar a la enumeración DUPLICADA._ |

## _mensaje_ VehicleDescriptor

Información de identificación del vehículo que realiza el viaje.

**Campos**

| _**Nombre del campo**_ | _**Tipo**_                                                                 | _**Exigida**_ | _**Cardinalidad**_ | _**Descripción**_                                                                                                                                                                                                                                                                    |
| ---------------------- | -------------------------------------------------------------------------- | ------------- | ------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **id**                 | [cadena](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Opcional      | Uno                | Identificación interna del sistema del vehículo. Debe ser **único** por vehículo, y se utiliza para el seguimiento del vehículo a medida que avanza por el sistema. Esta identificación no debe ser visible para el usuario final; para ello, utilice la etiqueta **etiqueta** campo |
| **etiqueta**           | [cadena](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Opcional      | Uno                | etiqueta visible para el usuario, es decir, algo que debe mostrarse al pasajero para ayudarle a identificar el vehículo correcto.                                                                                                                                                    |
| **matrícula**          | [cadena](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Opcional      | Uno                | La matrícula del vehículo.                                                                                                                                                                                                                                                           |

## _mensaje_ EntitySelector

Un selector para una entidad en un feed GTFS. Los valores de los campos deben corresponder a los campos apropiados en el feed GTFS. Debe darse al menos un especificador. Si se dan varios, deben interpretarse como unidos por el operador lógico `AND`. Además, la combinación de especificadores debe coincidir con la información correspondiente en el feed GTFS. En otras palabras, para que una alerta se aplique a una entidad en GTFS debe coincidir con todos los campos EntitySelector proporcionados. Por ejemplo, un EntitySelector que incluya los campos `route_id`: " `5` " y `route_type:` " `3` " se aplica sólo al bus `route_id` `route_id`: "5 `"` - no se aplica a ninguna otra ruta de route_type `:` `"`3". Si un productor quiere que una alerta se aplique a `route_id` `route_id`: "5 `"` así como a route_type `:`"3 `"`, deberá proporcionar dos EntitySelectors distintos, uno que haga referencia a `route_id` `route_id`: "5 `"` y otro que haga referencia a route_type `:` `"`3".

Debe darse al menos un especificador - todos los campos de un EntitySelector no pueden estar vacíos.

**Campos**

| _**Nombre del campo**_ | _**Tipo**_                                                                 | _**Exigida**_ | _**Cardinalidad**_ | _**Descripción**_                                                                                                                                                                                                                                                                                                                                                                                          |
| ---------------------- | -------------------------------------------------------------------------- | ------------- | ------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **agency_id**          | [cadena](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Condicional   | Uno                | El agency_id del feed GTFS al que se refiere este selector.                                                                                                                                                                                                                                                                                                                                                |
| **route_id**           | [cadena](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Condicional   | Uno                | El route_id del GTFS al que se refiere este selector. Si se proporciona direction_id, también debe proporcionarse route_id.                                                                                                                                                                                                                                                                                |
| **tipo_de_ruta**       | [int32](https://developers.google.com/protocol-buffers/docs/proto#scalar)  | Condicional   | Uno                | El route_type del GTFS al que hace referencia este selector.                                                                                                                                                                                                                                                                                                                                               |
| **direction_id**       | [uint32](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Condicional   | Uno                | El direction_id del archivo GTFS feed trips.txt, utilizado para seleccionar todos los viajes en una dirección para una ruta, especificada por route_id. Si se proporciona direction_id, también debe proporcionarse route_id. <br /><br />**Precaución:** este campo sigue siendo **experimental**y está sujeta a cambios. Es posible que se adopte formalmente en el futuro.<br />                        |
| **viaje**              | [TripDescriptor](#message-tripdescriptor)                                  | Condicional   | Uno                | La instancia de viaje de la GTFS a la que se refiere este selector. Este TripDescriptor debe resolver una única instancia de viaje en los datos GTFS (por ejemplo, un productor no puede proporcionar sólo un trip_id para viajes exact_times=0). Si el campo ScheduleRelationship se rellena dentro de este TripDescriptor, será ignorado por los consumidores cuando intenten identificar el viaje GTFS. |
| **stop_id**            | [cadena](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Condicional   | Uno                | El stop_id de la alimentación GTFS a la que se refiere este selector.                                                                                                                                                                                                                                                                                                                                      |

## _mensaje_ TranslatedString

Un mensaje internacionalizado que contiene versiones por idioma de un fragmento de texto o una URL. Se recogerá una de las cadenas de un mensaje. La resolución procede como sigue: Si el language de la interfaz de usuario coincide con el código de language de una traducción, se elige la primera traducción que coincida. Si el language por defecto de la interfaz de usuario (por ejemplo, el inglés) coincide con el código de language de una traducción, se elige la primera traducción que coincida. Si alguna traducción tiene un código de language no especificado, se elige esa traducción.

**Campos**

| _**Nombre del campo**_ | _**Tipo**_                         | _**Exigida**_ | _**Cardinalidad**_ | _**Descripción**_                             |
| ---------------------- | ---------------------------------- | ------------- | ------------------ | --------------------------------------------- |
| **traducción**         | [Traducción](#message-translation) | Exigida       | Muchos             | Se debe proporcionar al menos una traducción. |

## _mensaje_ Traducción

Una cadena localizada asignada a un language.

| _**Nombre del campo**_ | _**Tipo**_                                                                 | _**Exigida**_ | _**Cardinalidad**_ | _**Descripción**_                                                                                                                                                                                                                                                                              |
| ---------------------- | -------------------------------------------------------------------------- | ------------- | ------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **texto**              | [cadena](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Exigida       | Uno                | Una cadena UTF-8 que contiene el mensaje.                                                                                                                                                                                                                                                      |
| **language**           | [cadena](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Condicional   | Uno                | Código de language BCP-47. Puede omitirse si se desconoce el language o si no se realiza ninguna internacionalización para el feed. Se permite que como máximo una traducción tenga una etiqueta de language no especificada - si hay más de una traducción, se debe proporcionar el language. |

## _mensaje_ TranslatedImage

Un mensaje internacionalizado que contiene versiones por idioma de una imagen. Se recogerá una de las imágenes de un mensaje. La resolución procede como sigue: Si el language de la interfaz de usuario coincide con el código de language de una traducción, se elige la primera traducción que coincida. Si el language de la interfaz de usuario por defecto (por ejemplo, el inglés) coincide con el código de language de una traducción, se elige la primera traducción que coincida. Si alguna traducción tiene un código de language no especificado, se elige esa traducción.

**Precaución**: este mensaje es todavía **experimental** y está sujeto a cambios. Es posible que se adopte formalmente en el futuro.

**Campos**

| _**Nombre del campo**_ | _**Tipo**_                                | _**Exigida**_ | _**Cardinalidad**_ | _**Descripción**_                                   |
| ---------------------- | ----------------------------------------- | ------------- | ------------------ | --------------------------------------------------- |
| **imagen_localizada**  | [LocalizedImage](#message-localizedimage) | Exigida       | Muchos             | Debe proporcionarse al menos una imagen localizada. |

## _mensaje_ LocalizedImage

Una URL de imagen localizada asignada a un language.

| _**Nombre del campo**_ | _**Tipo**_                                                                 | _**Exigida**_ | _**Cardinalidad**_ | _**Descripción**_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| ---------------------- | -------------------------------------------------------------------------- | ------------- | ------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **url**                | [cadena](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Exigida       | Uno                | Cadena que contiene una URL que enlaza con una imagen. La imagen enlazada debe ser inferior a 2 MB. Si una imagen cambia de forma suficientemente significativa como para que se requiera una actualización en el lado del consumidor, el productor debe actualizar la URL a una nueva.<br /><br /> La URL debe ser una URL completa que incluya http:// o https://, y cualquier carácter especial en la URL debe ser escapado correctamente. Véase lo siguiente [https://www.w3.org/Addressing/URL/4_URI_Recommentations.html para](https://www.w3.org/Addressing/URL/4_URI_Recommentations.html for) una descripción de cómo crear valores de URL totalmente cualificados. |
| **media_type**         | [cadena](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Exigida       | Uno                | Tipo de medio IANA como para especificar el tipo de imagen que se mostrará. El tipo debe empezar por "image/"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| **language**           | [cadena](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Condicional   | Uno                | Código de language BCP-47. Puede omitirse si se desconoce el language o si no se realiza ninguna internacionalización para el feed. Se permite que como máximo una traducción tenga una etiqueta de language no especificada - si hay más de una traducción, se debe proporcionar el language.                                                                                                                                                                                                                                                                                                                                                                               |

## _mensaje_ Forma

Describe la trayectoria física que sigue un vehículo cuando la forma no forma parte del GTFS(CSV), como en el caso de un desvío ad hoc. Las formas pertenecen a los viajes y consisten en una polilínea codificada para una transmisión más eficiente. No es necesario que las formas intercepten exactamente la ubicación de las paradas, pero todas las paradas de un trayecto deben encontrarse a una pequeña distancia de la forma de ese trayecto, es decir, cerca de los segmentos de línea recta que conectan los puntos de la forma.

**Precaución**: este mensaje es todavía **experimental** y está sujeto a cambios. Es posible que se adopte formalmente en el futuro.<br/>.

**Campos**

| _**Nombre del campo**_   | _**Tipo**_                                                                 | _**Exigida**_ | _**Cardinalidad**_ | _**Descripción**_                                                                                                                                                                                                                                                                                                                                                                              |
| ------------------------ | -------------------------------------------------------------------------- | ------------- | ------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **shape_id**             | [cadena](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Exigida       | Uno                | Identificador de la forma. Debe ser diferente de cualquier `shape_id` definido en el GTFS(CSV). <br /><br />**Precaución:** este campo sigue siendo **experimental**y está sujeta a cambios. Es posible que se adopte formalmente en el futuro.                                                                                                                                                |
| **polilínea_codificada** | [cadena](https://developers.google.com/protocol-buffers/docs/proto#scalar) | Exigida       | Uno                | Representación polilínea codificada de la forma. Esta polilínea debe contener al menos dos puntos. Para más información sobre las polilíneas codificadas, véase <https://developers.google.com/maps/documentation/utilities/polylinealgorithm> <br /><br />**Precaución:** este campo sigue siendo **experimental**y está sujeta a cambios. Es posible que se adopte formalmente en el futuro. |
