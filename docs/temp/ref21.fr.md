### fare_rules.txt

Fichier : **Conditionnellement requis**

Clé primaire`(*`)

La table [fare_rules.txt](#farerulestxt) spécifie comment les tarifs dans [fare_attributes.txt](#fare_attributestxt) s'appliquent à un itinéraire. La plupart des structures tarifaires utilisent une combinaison des règles suivantes :

* Le tarif dépend des gares d'origine ou de destination.
* Le tarif dépend des zones par lesquelles l'itinéraire passe.
* Le tarif dépend de l'itinéraire utilisé par l'itinéraire.

Pour des exemples démontrant comment spécifier une structure tarifaire avec [fare_rules.txt](#farerulestxt) et [fare_attributes.txt](#fareattributestxt), consultez <https://code.google.com/p/googletransitdatafeed/wiki/FareExamples> dans le wiki du projet open source GoogleTransitDataFeed.

| Nom du champ     | Type                                                             | Présence        | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| ---------------- | ---------------------------------------------------------------- | --------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `fare_id`        | Référencement d'identifiants étrangers `fare_attributes.fare_id` | **Obligatoire** | Identifie une classe tarifaire.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| `route_id`       | Référencement d'identifiants étrangers `routes.route_id`         | Facultatif      | Identifie un itinéraire associé à la classe tarifaire. S'il existe plusieurs itinéraires avec les mêmes attributs tarifaires, créez un enregistrement dans le fichier [fare_rules.txt](#fare_rules.txt) pour chaque itinéraire.<hr />*Exemple : Si la classe tarifaire "b" est valable sur les lignes "TSW" et "TSE", l'enregistrement dans le fichier [fare_rules.txt](#fare_rules.txt) contiendrait ces enregistrements pour la classe tarifaire :* <br /> `  fare_id,route_id `<br />`b,TSW` <br /> `b,TSE`                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `origin_id`      | Référencement d'identifiants étrangers `stops.zone_id`           | Facultatif      | Identifie une zone d'origine. Si une classe tarifaire comporte plusieurs zones d'origine, créez un enregistrement dans le fichier [fare_rules.txt](#fare_rules.txt) pour chacune `origin_id`.<hr />*Exemple : Si la classe tarifaire "b" est valable pour tous les voyages ayant pour origine la zone "2" ou la zone "8", l'enregistrement dans le fichier [fare_rules.txt](#fare_rules.txt) contiendrait ces enregistrements pour la classe tarifaire :* <br /> `fare_id,...,origin_id` <br /> `b,...,2`  <br /> `b,...,8`                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `destination_id` | Référencement d'identifiants étrangers `stops.zone_id`           | Facultatif      | Identifie une zone de destination. Si une classe tarifaire comporte plusieurs zones de destination, créez un enregistrement dans le fichier [fare_rules.txt](#fare_rules.txt) pour chacune `destination_id`.<hr />*Exemple : Le site `origin_id` et `destination_id` peuvent être utilisés ensemble pour spécifier que la classe tarifaire "b" est valable pour les voyages entre les zones 3 et 4, et que pour les voyages entre les zones 3 et 5, la classe tarifaire "b" est valable pour les voyages entre les zones 3 et 5. [fare_rules.txt](#fare_rules.txt) contiendrait ces enregistrements pour la classe tarifaire :* <br />`fare_id,...,origin_id,destination_id` <br />`b,...,3,4`<br /> `b,...,3,5`                                                                                                                                                                                                                             |
| `contains_id`    | Référencement d'identifiants étrangers `stops.zone_id`           | Facultatif      | Identifie les zones dans lesquelles un usager entrera lorsqu'il utilisera une classe tarifaire donnée. Utilisé dans certains systèmes pour calculer la classe tarifaire correcte. <hr />*Exemple : Si la classe tarifaire "c" est associée à tous les déplacements sur l'itinéraire du GRT qui passe par les zones 5, 6 et 7, la classe tarifaire "c" est utilisée pour calculer le tarif correct. [fare_rules.txt](#fare_rules.txt) contiendrait ces enregistrements :* <br /> `fare_id,route_id,...,contains_id` <br />  `c,GRT,...,5` <br />`c,GRT,...,6` <br />`c,GRT,...,7` <br /> *Parce que toutes les `contains_id` zones doivent correspondre pour que le tarif s'applique, un itinéraire qui passe par les zones 5 et 6 mais pas par la zone 7 n'aurait pas la classe tarifaire "c". Pour plus de détails, voir <https://code.google.com/p/googletransitdatafeed/wiki/FareExamples> dans le wiki du projet GoogleTransitDataFeed.* |
